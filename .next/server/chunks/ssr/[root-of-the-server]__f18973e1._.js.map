{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/api/index.js"],"sourcesContent":["let _getAccessToken = null; \r\nlet _onUnauthorized = null;\r\n\r\nexport function configureApiAuth({ getAccessToken, onUnauthorized } = {}) {\r\n  _getAccessToken = getAccessToken || null;\r\n  _onUnauthorized = onUnauthorized || null;\r\n}\r\n\r\nexport const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4000\";\r\n\r\nexport function toApiUrl(pathOrUrl, absoluteUrl = false) {\r\n  if (!pathOrUrl) return \"\";\r\n  if (absoluteUrl) return pathOrUrl;\r\n  if (/^https?:\\/\\//i.test(pathOrUrl)) return pathOrUrl;\r\n  return `${API_BASE_URL}${pathOrUrl.startsWith(\"/\") ? \"\" : \"/\"}${pathOrUrl}`;\r\n}\r\n\r\nexport async function apiFetch(pathOrUrl, init = {}, opts = {}) {\r\n  const url = toApiUrl(pathOrUrl, opts.absoluteUrl);\r\n\r\n  const headers = new Headers(init.headers || {});\r\n  if (!headers.has(\"Content-Type\") && init.body != null && !(init.body instanceof FormData)) {\r\n    headers.set(\"Content-Type\", \"application/json\");\r\n  }\r\n\r\n  const reqInit = {\r\n    method: init.method || \"GET\",\r\n    credentials: \"include\",\r\n    mode: \"cors\",\r\n    ...init,\r\n    headers,\r\n    body:\r\n      init.body == null\r\n        ? undefined\r\n        : init.body instanceof FormData\r\n        ? init.body\r\n        : typeof init.body === \"string\"\r\n        ? init.body\r\n        : JSON.stringify(init.body),\r\n  };\r\n\r\n  // Bearer token\r\n  if (_getAccessToken && !headers.has(\"Authorization\")) {\r\n    try {\r\n      const token = await _getAccessToken();\r\n      if (token) headers.set(\"Authorization\", `Bearer ${token}`);\r\n    } catch {}\r\n  }\r\n\r\n  let res = await fetch(url, reqInit);\r\n  if (res.status !== 401) return parseResponse(res);\r\n\r\n  // 401 → refresh & retry\r\n  if (_onUnauthorized) {\r\n    const ok = await _onUnauthorized();\r\n    if (ok && _getAccessToken) {\r\n      try {\r\n        const token2 = await _getAccessToken();\r\n        if (token2) headers.set(\"Authorization\", `Bearer ${token2}`);\r\n      } catch {}\r\n      res = await fetch(url, { ...reqInit, headers });\r\n      if (res.status !== 401) return parseResponse(res);\r\n    }\r\n  }\r\n\r\n  throw await httpError(res);\r\n}\r\n\r\nasync function parseResponse(res) {\r\n  const text = await res.clone().text();\r\n  let data = null;\r\n  try { data = text ? JSON.parse(text) : null; } catch { data = text || null; }\r\n  if (!res.ok) throw wrap(res, data);\r\n  return data;\r\n}\r\n\r\nasync function httpError(res) {\r\n  try {\r\n    const t = await res.clone().text();\r\n    try { return wrap(res, t ? JSON.parse(t) : null); }\r\n    catch { return wrap(res, t || null); }\r\n  } catch { return wrap(res, null); }\r\n}\r\n\r\nfunction wrap(res, data) {\r\n  const err = new Error(`HTTP ${res.status}`);\r\n  err.status = res.status;\r\n  err.data = data;\r\n  return err;\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA,IAAI,kBAAkB;AACtB,IAAI,kBAAkB;AAEf,SAAS,iBAAiB,EAAE,cAAc,EAAE,cAAc,EAAE,GAAG,CAAC,CAAC;IACtE,kBAAkB,kBAAkB;IACpC,kBAAkB,kBAAkB;AACtC;AAEO,MAAM,eAAe,6DAAwC;AAE7D,SAAS,SAAS,SAAS,EAAE,cAAc,KAAK;IACrD,IAAI,CAAC,WAAW,OAAO;IACvB,IAAI,aAAa,OAAO;IACxB,IAAI,gBAAgB,IAAI,CAAC,YAAY,OAAO;IAC5C,OAAO,GAAG,eAAe,UAAU,UAAU,CAAC,OAAO,KAAK,MAAM,WAAW;AAC7E;AAEO,eAAe,SAAS,SAAS,EAAE,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IAC5D,MAAM,MAAM,SAAS,WAAW,KAAK,WAAW;IAEhD,MAAM,UAAU,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC;IAC7C,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,KAAK,IAAI,IAAI,QAAQ,CAAC,CAAC,KAAK,IAAI,YAAY,QAAQ,GAAG;QACzF,QAAQ,GAAG,CAAC,gBAAgB;IAC9B;IAEA,MAAM,UAAU;QACd,QAAQ,KAAK,MAAM,IAAI;QACvB,aAAa;QACb,MAAM;QACN,GAAG,IAAI;QACP;QACA,MACE,KAAK,IAAI,IAAI,OACT,YACA,KAAK,IAAI,YAAY,WACrB,KAAK,IAAI,GACT,OAAO,KAAK,IAAI,KAAK,WACrB,KAAK,IAAI,GACT,KAAK,SAAS,CAAC,KAAK,IAAI;IAChC;IAEA,eAAe;IACf,IAAI,mBAAmB,CAAC,QAAQ,GAAG,CAAC,kBAAkB;QACpD,IAAI;YACF,MAAM,QAAQ,MAAM;YACpB,IAAI,OAAO,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO;QAC3D,EAAE,OAAM,CAAC;IACX;IAEA,IAAI,MAAM,MAAM,MAAM,KAAK;IAC3B,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO,cAAc;IAE7C,wBAAwB;IACxB,IAAI,iBAAiB;QACnB,MAAM,KAAK,MAAM;QACjB,IAAI,MAAM,iBAAiB;YACzB,IAAI;gBACF,MAAM,SAAS,MAAM;gBACrB,IAAI,QAAQ,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,QAAQ;YAC7D,EAAE,OAAM,CAAC;YACT,MAAM,MAAM,MAAM,KAAK;gBAAE,GAAG,OAAO;gBAAE;YAAQ;YAC7C,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO,cAAc;QAC/C;IACF;IAEA,MAAM,MAAM,UAAU;AACxB;AAEA,eAAe,cAAc,GAAG;IAC9B,MAAM,OAAO,MAAM,IAAI,KAAK,GAAG,IAAI;IACnC,IAAI,OAAO;IACX,IAAI;QAAE,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;IAAM,EAAE,OAAM;QAAE,OAAO,QAAQ;IAAM;IAC5E,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,KAAK,KAAK;IAC7B,OAAO;AACT;AAEA,eAAe,UAAU,GAAG;IAC1B,IAAI;QACF,MAAM,IAAI,MAAM,IAAI,KAAK,GAAG,IAAI;QAChC,IAAI;YAAE,OAAO,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,KAAK;QAAO,EAClD,OAAM;YAAE,OAAO,KAAK,KAAK,KAAK;QAAO;IACvC,EAAE,OAAM;QAAE,OAAO,KAAK,KAAK;IAAO;AACpC;AAEA,SAAS,KAAK,GAAG,EAAE,IAAI;IACrB,MAAM,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC1C,IAAI,MAAM,GAAG,IAAI,MAAM;IACvB,IAAI,IAAI,GAAG;IACX,OAAO;AACT","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/access/rules.js"],"sourcesContent":["// access/rules.js\r\n\r\n// ---------- ระดับตำแหน่ง ----------\r\nexport const LEVEL_RANK = {\r\n  STAF: 1,\r\n  SVR: 2,\r\n  ASST: 3,\r\n  MANAGER: 4,\r\n  MD: 5,\r\n};\r\n\r\n// ---------- helpers ----------\r\nexport function isAdmin(user) {\r\n  return (user?.role?.name || \"\").toLowerCase() === \"admin\";\r\n}\r\n\r\nexport function userDeptCodes(user) {\r\n  // return set ของ code แผนกทั้งหมด เช่น { \"HR\", \"IT\", \"MK\" }\r\n  return new Set(\r\n    (user?.departments || []).map((d) => String(d.code).toUpperCase())\r\n  );\r\n}\r\n\r\nexport function userRank(user) {\r\n  const lvl = user?.primary?.level || user?.positionLevel;\r\n  return LEVEL_RANK[String(lvl).toUpperCase()] || 0;\r\n}\r\n\r\nexport function ieq(a, b) {\r\n  return String(a || \"\").toLowerCase() === String(b || \"\").toLowerCase();\r\n}\r\n\r\n// ---------- กฎการเข้าถึง ----------\r\n/**\r\n * rule.require:\r\n *  - roleAny: [\"admin\"]\r\n *  - deptAny: [\"HR\"]\r\n *  - minRank: \"MANAGER\"\r\n */\r\nconst RULES = [\r\n  // 👑 Admin zone\r\n  { pattern: /^\\/admin/, require: { roleAny: [\"admin\"] } },\r\n\r\n  // HR module (summary, reports, evals)\r\n  { pattern: /^\\/hr/, require: { deptAny: [\"HR\"] } },\r\n\r\n  // QMS module\r\n  { pattern: /^\\/qms/, require: { deptAny: [\"QMS\"] } },\r\n\r\n  // IT module\r\n  { pattern: /^\\/it/, require: { deptAny: [\"IT\"] } },\r\n\r\n  // Approvals (ต้องเป็น Manager ขึ้นไป)\r\n  { pattern: /^\\/approvals/, require: { minRank: \"MANAGER\" } },\r\n\r\n  // My profile → ใครก็เข้าได้ (แค่ต้อง login)\r\n  { pattern: /^\\/me/, require: {} },\r\n\r\n  // Dashboard หลังบ้าน (ทุกคนที่ login ได้)\r\n  { pattern: /^\\/dashboard/, require: {} },\r\n];\r\n\r\n// ---------- API ----------\r\nexport function findRule(path) {\r\n  return RULES.find((r) => r.pattern.test(path));\r\n}\r\n"],"names":[],"mappings":"AAAA,kBAAkB;AAElB,qCAAqC;;;;;;;;;;;;;;;AAC9B,MAAM,aAAa;IACxB,MAAM;IACN,KAAK;IACL,MAAM;IACN,SAAS;IACT,IAAI;AACN;AAGO,SAAS,QAAQ,IAAI;IAC1B,OAAO,CAAC,MAAM,MAAM,QAAQ,EAAE,EAAE,WAAW,OAAO;AACpD;AAEO,SAAS,cAAc,IAAI;IAChC,4DAA4D;IAC5D,OAAO,IAAI,IACT,CAAC,MAAM,eAAe,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,OAAO,EAAE,IAAI,EAAE,WAAW;AAEnE;AAEO,SAAS,SAAS,IAAI;IAC3B,MAAM,MAAM,MAAM,SAAS,SAAS,MAAM;IAC1C,OAAO,UAAU,CAAC,OAAO,KAAK,WAAW,GAAG,IAAI;AAClD;AAEO,SAAS,IAAI,CAAC,EAAE,CAAC;IACtB,OAAO,OAAO,KAAK,IAAI,WAAW,OAAO,OAAO,KAAK,IAAI,WAAW;AACtE;AAEA,qCAAqC;AACrC;;;;;CAKC,GACD,MAAM,QAAQ;IACZ,gBAAgB;IAChB;QAAE,SAAS;QAAY,SAAS;YAAE,SAAS;gBAAC;aAAQ;QAAC;IAAE;IAEvD,sCAAsC;IACtC;QAAE,SAAS;QAAS,SAAS;YAAE,SAAS;gBAAC;aAAK;QAAC;IAAE;IAEjD,aAAa;IACb;QAAE,SAAS;QAAU,SAAS;YAAE,SAAS;gBAAC;aAAM;QAAC;IAAE;IAEnD,YAAY;IACZ;QAAE,SAAS;QAAS,SAAS;YAAE,SAAS;gBAAC;aAAK;QAAC;IAAE;IAEjD,sCAAsC;IACtC;QAAE,SAAS;QAAgB,SAAS;YAAE,SAAS;QAAU;IAAE;IAE3D,4CAA4C;IAC5C;QAAE,SAAS;QAAS,SAAS,CAAC;IAAE;IAEhC,0CAA0C;IAC1C;QAAE,SAAS;QAAgB,SAAS,CAAC;IAAE;CACxC;AAGM,SAAS,SAAS,IAAI;IAC3B,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,CAAC,IAAI,CAAC;AAC1C","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/providers/AuthProvider.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useCallback, useEffect, useRef, useState, useMemo } from \"react\";\r\nimport { apiFetch, configureApiAuth } from \"@/api\";\r\nimport { findRule, isAdmin, userDeptCodes, userRank, LEVEL_RANK } from \"@/access/rules\";\r\n\r\nexport const AuthCtx = createContext(null);\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [isReady, setReady] = useState(false);\r\n  const accessTokenRef = useRef(null);\r\n\r\n  const refresh = useCallback(async () => {\r\n    try {\r\n      const data = await apiFetch(\"/api/auth/refresh\", { method: \"POST\" });\r\n      accessTokenRef.current = data?.accessToken || null;\r\n      setUser(data?.user || null);\r\n      return true;\r\n    } catch {\r\n      accessTokenRef.current = null;\r\n      setUser(null);\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  const fetchMe = useCallback(async () => {\r\n    try {\r\n      const data = await apiFetch(\"/api/auth/me\");\r\n      setUser(data?.user || null);\r\n      return !!data?.user;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    configureApiAuth({\r\n      getAccessToken: () => accessTokenRef.current,\r\n      onUnauthorized: refresh,\r\n    });\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const ok = await fetchMe();\r\n      if (!ok) await refresh();\r\n      setReady(true);\r\n    })();\r\n  }, [fetchMe, refresh]);\r\n\r\n  const signIn = useCallback(async (email, password) => {\r\n    try {\r\n      const data = await apiFetch(\"/api/auth/login\", { method: \"POST\", body: { email, password } });\r\n      accessTokenRef.current = data?.accessToken || null;\r\n      await fetchMe();\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }, [fetchMe]);\r\n\r\n  const signOut = useCallback(async () => {\r\n    try { await apiFetch(\"/api/auth/logout\", { method: \"POST\" }); } catch {}\r\n    accessTokenRef.current = null;\r\n    setUser(null);\r\n    return true;\r\n  }, []);\r\n\r\n  function canVisit(path) {\r\n    if (!user) return false;\r\n    if (isAdmin(user)) return true;\r\n    const rule = findRule(path);\r\n    if (!rule) return true;\r\n    const { require = {} } = rule;\r\n    const codes = userDeptCodes(user);\r\n    const rank  = userRank(user);\r\n    if (require.deptAny?.length && !require.deptAny.some((c) => codes.has(String(c).toUpperCase()))) return false;\r\n    if (require.deptAll?.length && !require.deptAll.every((c) => codes.has(String(c).toUpperCase()))) return false;\r\n    if (require.minRank) {\r\n      const need = LEVEL_RANK[String(require.minRank).toUpperCase()] || 0;\r\n      if (rank < need) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const value = useMemo(() => ({\r\n    isReady,\r\n    isAuthenticated: !!user,\r\n    user,\r\n    setUser,\r\n    accessToken: accessTokenRef.current,\r\n    signIn,\r\n    signOut,\r\n    refresh,\r\n    authedFetch: (url, init={}) => apiFetch(url, init, { absoluteUrl: /^https?:\\/\\//i.test(url) }),\r\n    canVisit,\r\n  }), [isReady, user, signIn, signOut, refresh]);\r\n\r\n  return <AuthCtx.Provider value={value}>{children}</AuthCtx.Provider>;\r\n}"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAHA;;;;;AAKO,MAAM,wBAAU,IAAA,sNAAa,EAAC;AAE9B,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,iBAAiB,IAAA,+MAAM,EAAC;IAE9B,MAAM,UAAU,IAAA,oNAAW,EAAC;QAC1B,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,wHAAQ,EAAC,qBAAqB;gBAAE,QAAQ;YAAO;YAClE,eAAe,OAAO,GAAG,MAAM,eAAe;YAC9C,QAAQ,MAAM,QAAQ;YACtB,OAAO;QACT,EAAE,OAAM;YACN,eAAe,OAAO,GAAG;YACzB,QAAQ;YACR,OAAO;QACT;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,IAAA,oNAAW,EAAC;QAC1B,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,wHAAQ,EAAC;YAC5B,QAAQ,MAAM,QAAQ;YACtB,OAAO,CAAC,CAAC,MAAM;QACjB,EAAE,OAAM;YACN,OAAO;QACT;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAA,gIAAgB,EAAC;YACf,gBAAgB,IAAM,eAAe,OAAO;YAC5C,gBAAgB;QAClB;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR,CAAC;YACC,MAAM,KAAK,MAAM;YACjB,IAAI,CAAC,IAAI,MAAM;YACf,SAAS;QACX,CAAC;IACH,GAAG;QAAC;QAAS;KAAQ;IAErB,MAAM,SAAS,IAAA,oNAAW,EAAC,OAAO,OAAO;QACvC,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,wHAAQ,EAAC,mBAAmB;gBAAE,QAAQ;gBAAQ,MAAM;oBAAE;oBAAO;gBAAS;YAAE;YAC3F,eAAe,OAAO,GAAG,MAAM,eAAe;YAC9C,MAAM;YACN,OAAO;QACT,EAAE,OAAM;YACN,OAAO;QACT;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,UAAU,IAAA,oNAAW,EAAC;QAC1B,IAAI;YAAE,MAAM,IAAA,wHAAQ,EAAC,oBAAoB;gBAAE,QAAQ;YAAO;QAAI,EAAE,OAAM,CAAC;QACvE,eAAe,OAAO,GAAG;QACzB,QAAQ;QACR,OAAO;IACT,GAAG,EAAE;IAEL,SAAS,SAAS,IAAI;QACpB,IAAI,CAAC,MAAM,OAAO;QAClB,IAAI,IAAA,0HAAO,EAAC,OAAO,OAAO;QAC1B,MAAM,OAAO,IAAA,2HAAQ,EAAC;QACtB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,EAAE,UAAU,CAAC,CAAC,EAAE,GAAG;QACzB,MAAM,QAAQ,IAAA,gIAAa,EAAC;QAC5B,MAAM,OAAQ,IAAA,2HAAQ,EAAC;QACvB,IAAI,QAAQ,OAAO,EAAE,UAAU,CAAC,QAAQ,OAAO,CAAC,IAAI,CAAC,CAAC,IAAM,MAAM,GAAG,CAAC,OAAO,GAAG,WAAW,MAAM,OAAO;QACxG,IAAI,QAAQ,OAAO,EAAE,UAAU,CAAC,QAAQ,OAAO,CAAC,KAAK,CAAC,CAAC,IAAM,MAAM,GAAG,CAAC,OAAO,GAAG,WAAW,MAAM,OAAO;QACzG,IAAI,QAAQ,OAAO,EAAE;YACnB,MAAM,OAAO,6HAAU,CAAC,OAAO,QAAQ,OAAO,EAAE,WAAW,GAAG,IAAI;YAClE,IAAI,OAAO,MAAM,OAAO;QAC1B;QACA,OAAO;IACT;IAEA,MAAM,QAAQ,IAAA,gNAAO,EAAC,IAAM,CAAC;YAC3B;YACA,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA,aAAa,eAAe,OAAO;YACnC;YACA;YACA;YACA,aAAa,CAAC,KAAK,OAAK,CAAC,CAAC,GAAK,IAAA,wHAAQ,EAAC,KAAK,MAAM;oBAAE,aAAa,gBAAgB,IAAI,CAAC;gBAAK;YAC5F;QACF,CAAC,GAAG;QAAC;QAAS;QAAM;QAAQ;QAAS;KAAQ;IAE7C,qBAAO,8OAAC,QAAQ,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC1C","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/providers/index.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ThemeProvider } from \"next-themes\";\r\nimport { AuthProvider } from \"@/providers/AuthProvider\";  // ✅ แยกไฟล์ Provider จริง\r\n\r\nexport default function Providers({ children }) {\r\n  return (\r\n    <ThemeProvider\r\n      attribute=\"class\"\r\n      defaultTheme=\"light\"\r\n      enableSystem={false}\r\n      storageKey=\"theme\"\r\n      disableTransitionOnChange\r\n    >\r\n      <AuthProvider>{children}</AuthProvider>\r\n    </ThemeProvider>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA,yNAA0D,0BAA0B;AAHpF;;;;AAKe,SAAS,UAAU,EAAE,QAAQ,EAAE;IAC5C,qBACE,8OAAC,iKAAa;QACZ,WAAU;QACV,cAAa;QACb,cAAc;QACd,YAAW;QACX,yBAAyB;kBAEzB,cAAA,8OAAC,0IAAY;sBAAE;;;;;;;;;;;AAGrB","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/lib/utils.js"],"sourcesContent":["import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAM;IAC1B,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OACJ;IACC,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/ThemeToggle.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useTheme } from \"next-themes\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Sun, Moon } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nexport default function ThemeToggle() {\r\n  const { theme, setTheme } = useTheme();\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => setMounted(true), []);\r\n  if (!mounted) return null;\r\n\r\n  const isDark = theme === \"dark\";\r\n\r\n  return (\r\n    <button\r\n      onClick={() => setTheme(isDark ? \"light\" : \"dark\")}\r\n      className=\"\r\n        flex items-center justify-start md:justify-center gap-2 rounded-md \r\n        p-2 md:px-3 md:py-2\r\n        bg-white/20 text-black dark:bg-white/10 dark:text-white\r\n        hover:bg-white/30 dark:hover:bg-white/20\r\n        transition\r\n        w-full md:w-auto\r\n      \"\r\n      aria-label=\"Toggle Dark Mode\"\r\n    >\r\n      <AnimatePresence mode=\"wait\" initial={false}>\r\n        {isDark ? (\r\n          <motion.span\r\n            key=\"sun\"\r\n            initial={{ rotate: -90, opacity: 0 }}\r\n            animate={{ rotate: 0, opacity: 1 }}\r\n            exit={{ rotate: 90, opacity: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <Sun className=\"h-5 w-5 text-yellow-400 transition-transform md:hover:scale-110\" />\r\n          </motion.span>\r\n        ) : (\r\n          <motion.span\r\n            key=\"moon\"\r\n            initial={{ rotate: 90, opacity: 0 }}\r\n            animate={{ rotate: 0, opacity: 1 }}\r\n            exit={{ rotate: -90, opacity: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <Moon className=\"h-5 w-5 text-indigo-500 transition-transform md:hover:scale-110\" />\r\n          </motion.span>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      <span className=\"block text-sm font-medium md:hidden\">\r\n        {isDark ? \"Light Mode\" : \"Dark Mode\"}\r\n      </span>\r\n    </button>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAQ;IACpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC,IAAM,WAAW,OAAO,EAAE;IACpC,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,SAAS,UAAU;IAEzB,qBACE,8OAAC;QACC,SAAS,IAAM,SAAS,SAAS,UAAU;QAC3C,WAAU;QAQV,cAAW;;0BAEX,8OAAC,4MAAe;gBAAC,MAAK;gBAAO,SAAS;0BACnC,uBACC,8OAAC,oMAAM,CAAC,IAAI;oBAEV,SAAS;wBAAE,QAAQ,CAAC;wBAAI,SAAS;oBAAE;oBACnC,SAAS;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBACjC,MAAM;wBAAE,QAAQ;wBAAI,SAAS;oBAAE;oBAC/B,YAAY;wBAAE,UAAU;oBAAI;8BAE5B,cAAA,8OAAC,uMAAG;wBAAC,WAAU;;;;;;mBANX;;;;yCASN,8OAAC,oMAAM,CAAC,IAAI;oBAEV,SAAS;wBAAE,QAAQ;wBAAI,SAAS;oBAAE;oBAClC,SAAS;wBAAE,QAAQ;wBAAG,SAAS;oBAAE;oBACjC,MAAM;wBAAE,QAAQ,CAAC;wBAAI,SAAS;oBAAE;oBAChC,YAAY;wBAAE,UAAU;oBAAI;8BAE5B,cAAA,8OAAC,0MAAI;wBAAC,WAAU;;;;;;mBANZ;;;;;;;;;;0BAWV,8OAAC;gBAAK,WAAU;0BACb,SAAS,eAAe;;;;;;;;;;;;AAIjC","debugId":null}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/stateful-button.jsx"],"sourcesContent":["\"use client\";\r\nimport { forwardRef } from \"react\";\r\nimport { motion } from \"motion/react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst StatefulButton = forwardRef(function StatefulButton(\r\n  {\r\n    loading = false,\r\n    loadingText = \"Loading...\",\r\n    disabled,\r\n    className,\r\n    children,\r\n    ...rest\r\n  },\r\n  ref\r\n) {\r\n  const isDisabled = disabled || loading;\r\n\r\n  return (\r\n    <motion.button\r\n      ref={ref}\r\n      type=\"button\"\r\n      {...rest}\r\n      disabled={isDisabled}\r\n      aria-busy={loading || undefined}\r\n      data-loading={loading ? \"\" : undefined}\r\n      className={cn(\r\n        \"inline-flex h-10 items-center justify-center rounded-md px-4 text-sm transition\",\r\n        isDisabled ? \"opacity-70\" : \"\",\r\n        className\r\n      )}\r\n      whileTap={!isDisabled ? { scale: 0.985 } : undefined}\r\n    >\r\n      {loading ? loadingText : children}\r\n    </motion.button>\r\n  );\r\n});\r\n\r\nexport default StatefulButton;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,+BAAiB,IAAA,mNAAU,EAAC,SAAS,eACzC,EACE,UAAU,KAAK,EACf,cAAc,YAAY,EAC1B,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,GAAG,MACJ,EACD,GAAG;IAEH,MAAM,aAAa,YAAY;IAE/B,qBACE,8OAAC,oMAAM,CAAC,MAAM;QACZ,KAAK;QACL,MAAK;QACJ,GAAG,IAAI;QACR,UAAU;QACV,aAAW,WAAW;QACtB,gBAAc,UAAU,KAAK;QAC7B,WAAW,IAAA,kHAAE,EACX,mFACA,aAAa,eAAe,IAC5B;QAEF,UAAU,CAAC,aAAa;YAAE,OAAO;QAAM,IAAI;kBAE1C,UAAU,cAAc;;;;;;AAG/B;uCAEe","debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/layout/navbar/NavItem.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function DesktopNavItem({ item }) {\r\n  const pathname = usePathname();\r\n  const isActive = pathname === item.href;\r\n  const Icon = item.icon;\r\n\r\n  return (\r\n    <Link\r\n      href={item.href}\r\n      aria-current={isActive ? \"page\" : undefined}\r\n      className={cn(\r\n        \"relative flex items-center gap-1 transition group\",\r\n        isActive\r\n          ? \"text-black dark:text-white font-semibold\"\r\n          : \"text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white\"\r\n      )}\r\n    >\r\n      <motion.span whileHover={{ rotate: -5, scale: 1.1 }} transition={{ duration: 0.2 }}>\r\n        <Icon\r\n          className={cn(\r\n            \"w-4 h-4 transition\",\r\n            isActive\r\n              ? \"text-black dark:text-white\"\r\n              : \"text-gray-500 dark:text-gray-400 group-hover:text-black dark:group-hover:text-white\"\r\n          )}\r\n        />\r\n      </motion.span>\r\n      {item.label}\r\n      {isActive && (\r\n        <motion.span\r\n          layoutId=\"nav-underline\"\r\n          className=\"absolute -bottom-1 left-0 h-0.5 w-full bg-black dark:bg-white\"\r\n        />\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport function MobileNavItem({ item, onClick }) {\r\n  const pathname = usePathname();\r\n  const isActive = pathname === item.href;\r\n  const Icon = item.icon;\r\n\r\n  return (\r\n    <Link\r\n      href={item.href}\r\n      onClick={onClick}\r\n      aria-current={isActive ? \"page\" : undefined}\r\n      className={cn(\r\n        \"flex items-center gap-3 rounded-md px-3 py-2.5 transition\",\r\n        \"text-gray-700 dark:text-gray-300 hover:bg-black/5 dark:hover:bg-white/5\",\r\n        isActive &&\r\n          \"font-semibold text-black dark:text-white relative before:absolute before:left-0 before:top-1/2 before:-translate-y-1/2 before:h-2 before:w-2 before:rounded-full before:bg-black dark:before:bg-white before:-ml-2\"\r\n      )}\r\n    >\r\n      <Icon className={cn(\"h-5 w-5\", isActive ? \"text-black dark:text-white\" : \"text-gray-500 dark:text-gray-400\")} />\r\n      {item.label}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS,eAAe,EAAE,IAAI,EAAE;IACrC,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,WAAW,aAAa,KAAK,IAAI;IACvC,MAAM,OAAO,KAAK,IAAI;IAEtB,qBACE,8OAAC,uKAAI;QACH,MAAM,KAAK,IAAI;QACf,gBAAc,WAAW,SAAS;QAClC,WAAW,IAAA,kHAAE,EACX,qDACA,WACI,6CACA;;0BAGN,8OAAC,oMAAM,CAAC,IAAI;gBAAC,YAAY;oBAAE,QAAQ,CAAC;oBAAG,OAAO;gBAAI;gBAAG,YAAY;oBAAE,UAAU;gBAAI;0BAC/E,cAAA,8OAAC;oBACC,WAAW,IAAA,kHAAE,EACX,sBACA,WACI,+BACA;;;;;;;;;;;YAIT,KAAK,KAAK;YACV,0BACC,8OAAC,oMAAM,CAAC,IAAI;gBACV,UAAS;gBACT,WAAU;;;;;;;;;;;;AAKpB;AAEO,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAE;IAC7C,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,WAAW,aAAa,KAAK,IAAI;IACvC,MAAM,OAAO,KAAK,IAAI;IAEtB,qBACE,8OAAC,uKAAI;QACH,MAAM,KAAK,IAAI;QACf,SAAS;QACT,gBAAc,WAAW,SAAS;QAClC,WAAW,IAAA,kHAAE,EACX,6DACA,2EACA,YACE;;0BAGJ,8OAAC;gBAAK,WAAW,IAAA,kHAAE,EAAC,WAAW,WAAW,+BAA+B;;;;;;YACxE,KAAK,KAAK;;;;;;;AAGjB","debugId":null}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useAuth.js"],"sourcesContent":["\"use client\";\r\nimport { useContext } from \"react\";\r\nimport { AuthCtx } from \"@/providers/AuthProvider\";\r\n\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthCtx);\r\n  if (!ctx) throw new Error(\"useAuth must be used within <AuthProvider/>\");\r\n  return ctx;\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIO,SAAS;IACd,MAAM,MAAM,IAAA,mNAAU,EAAC,qIAAO;IAC9B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/config/routes.js"],"sourcesContent":["import {\r\n  findRule,\r\n  isAdmin,\r\n  userDeptCodes,\r\n  userRank,\r\n  LEVEL_RANK,\r\n} from \"@/access/rules\";\r\n\r\nimport {\r\n  Home, Info, Wrench, Mail, MessageSquare, Shield,\r\n  Building2, Users, ClipboardList, BarChart3, Wallet\r\n} from \"lucide-react\";\r\n\r\n/** ลิงก์พื้นฐาน (ไม่อยู่ในหมวด) */\r\nexport const BASE_LINKS = [\r\n  { label: \"Home\", href: \"/\", icon: Home },\r\n  { label: \"About\", href: \"#about\", icon: Info },\r\n  { label: \"Services\", href: \"#services\", icon: Wrench },\r\n  { label: \"Contact\", href: \"/contact\", icon: Mail },\r\n];\r\n\r\n/** หมวดหมู่ทั้งหมด (เพิ่ม/ลบ/แก้ได้ที่นี่ที่เดียว) */\r\nexport const CATEGORY_REGISTRY = [\r\n  {\r\n    id: \"hr\",\r\n    label: \"HR\",\r\n    icon: MessageSquare,\r\n    basePath: \"/hr\",\r\n    links: [\r\n      { label: \"งานของฉัน\",        href: \"/hr/evals\",               icon: ClipboardList },\r\n      { label: \"Approvals\",         href: \"/approvals\",              icon: ClipboardList },\r\n      { label: \"กำหนดรอบประเมิน\",   href: \"/hr/cycles\",              icon: ClipboardList },\r\n      { label: \"ดูรายงานประเมิน\",   href: \"/hr/reports/evaluations\", icon: BarChart3 },\r\n      { label: \"LineOA\",            href: \"/hr/lineoa\",              icon: MessageSquare },\r\n    ],\r\n  },\r\n  {\r\n    id: \"admin\",\r\n    label: \"Admin\",\r\n    icon: Shield,\r\n    basePath: \"/admin\",\r\n    links: [\r\n      { label: \"Departments\",   href: \"/admin/departments\",   icon: Building2 },\r\n      { label: \"Roles\",         href: \"/admin/roles\",         icon: Shield },\r\n      { label: \"Users\",         href: \"/admin/users\",         icon: Users },\r\n      { label: \"Contacts\",      href: \"/admin/contacts\",      icon: Mail },\r\n      { label: \"Organizations\", href: \"/admin/organizations\", icon: ClipboardList },\r\n    ],\r\n  },\r\n\r\n  // —— ตัวอย่างหมวดใหม่: Finance ——\r\n  {\r\n    id: \"finance\",\r\n    label: \"Finance\",\r\n    icon: Wallet,\r\n    basePath: \"/finance\",\r\n    links: [\r\n      { label: \"ภาพรวมงบประมาณ\", href: \"/finance/overview\" },\r\n      { label: \"คำขอเบิกจ่าย\",   href: \"/finance/requests\" },\r\n      { label: \"รายงานการเงิน\",  href: \"/finance/reports\" },\r\n    ],\r\n  },\r\n];\r\n\r\n/* ===== Helpers: สิทธิ์กลาง ===== */\r\nexport function canVisitPath(path, user) {\r\n  if (!user) return false;\r\n  if (isAdmin(user)) return true;\r\n\r\n  const rule = findRule(path);\r\n  if (!rule) return true;\r\n\r\n  const { require = {} } = rule;\r\n  const codes = userDeptCodes(user);\r\n  const rank  = userRank(user);\r\n\r\n  if (require.deptAny?.length && !require.deptAny.some(c => codes.has(String(c).toUpperCase()))) return false;\r\n  if (require.deptAll?.length && !require.deptAll.every(c => codes.has(String(c).toUpperCase()))) return false;\r\n  if (require.minRank) {\r\n    const need = LEVEL_RANK[String(require.minRank).toUpperCase()] || 0;\r\n    if (rank < need) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function visibleLinks(user, links) {\r\n  return (links || []).filter(it => canVisitPath(it.href, user));\r\n}\r\n\r\nexport function visibleCategories(user) {\r\n  return CATEGORY_REGISTRY\r\n    .filter(cat => canVisitPath(cat.basePath, user))\r\n    .map(cat => ({ ...cat, links: visibleLinks(user, cat.links) }))\r\n    .filter(cat => cat.links.length > 0);\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 899, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/layout/navbar/NavLinks.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useState, useRef, useCallback } from \"react\";\r\nimport { DesktopNavItem } from \"./NavItem\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { BASE_LINKS, visibleCategories } from \"@/config/routes\";\r\nimport { ChevronDown } from \"lucide-react\";\r\n\r\nexport function NavLinks() {\r\n  const { user } = useAuth();\r\n  const categories = visibleCategories(user);\r\n\r\n  return (\r\n    <div className=\"ml-10 flex items-center gap-6\">\r\n      {BASE_LINKS.map((item) => (\r\n        <DesktopNavItem key={item.href} item={item} />\r\n      ))}\r\n\r\n      {categories.map((cat) => (\r\n        <CategoryDropdown key={cat.id} category={cat} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CategoryDropdown({ category }) {\r\n  const [open, setOpen] = useState(false);\r\n  const closeTimer = useRef(null);\r\n  const menuId = `${category.id}-menu`;\r\n\r\n  const handleOpen = useCallback(() => {\r\n    if (closeTimer.current) clearTimeout(closeTimer.current);\r\n    setOpen(true);\r\n  }, []);\r\n  const handleClose = useCallback(() => {\r\n    if (closeTimer.current) clearTimeout(closeTimer.current);\r\n    closeTimer.current = setTimeout(() => setOpen(false), 120);\r\n  }, []);\r\n  const toggle = useCallback(() => setOpen((v) => !v), []);\r\n\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div\r\n      className=\"relative\"\r\n      onMouseEnter={handleOpen}\r\n      onMouseLeave={handleClose}\r\n      onFocus={handleOpen}\r\n      onBlur={handleClose}\r\n    >\r\n      <button\r\n        type=\"button\"\r\n        onClick={toggle}\r\n        aria-haspopup=\"menu\"\r\n        aria-expanded={open}\r\n        aria-controls={menuId}\r\n        className={cn(\r\n          \"relative flex items-center gap-1 transition group\",\r\n          \"text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white\"\r\n        )}\r\n      >\r\n        {Icon ? <Icon className=\"h-4 w-4\" /> : null}\r\n        {category.label}\r\n        <ChevronDown className={`h-4 w-4 transition-transform ${open ? \"rotate-180\" : \"\"}`} />\r\n      </button>\r\n\r\n      <div\r\n        id={menuId}\r\n        role=\"menu\"\r\n        className={`absolute left-0 z-50 mt-2 min-w-[200px] rounded-xl border bg-white shadow-lg ring-1 ring-black/5 dark:bg-neutral-900 dark:border-white/10 dark:ring-white/10 transition-all duration-150\r\n        ${open ? \"opacity-100 translate-y-0\" : \"pointer-events-none -translate-y-1 opacity-0\"}`}\r\n      >\r\n        {category.links.map((it) => (\r\n          <Link\r\n            key={it.href}\r\n            href={it.href}\r\n            role=\"menuitem\"\r\n            className=\"flex items-center gap-2 px-3 py-2 text-sm text-neutral-800 hover:bg-neutral-50 focus:bg-neutral-50 focus:outline-none dark:text-neutral-200 dark:hover:bg-white/5 dark:focus:bg-white/5\"\r\n          >\r\n            {it.icon ? <it.icon className=\"h-4 w-4\" /> : null}\r\n            <span>{it.label}</span>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,2HAAO;IACxB,MAAM,aAAa,IAAA,qIAAiB,EAAC;IAErC,qBACE,8OAAC;QAAI,WAAU;;YACZ,8HAAU,CAAC,GAAG,CAAC,CAAC,qBACf,8OAAC,4JAAc;oBAAiB,MAAM;mBAAjB,KAAK,IAAI;;;;;YAG/B,WAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;oBAA8B,UAAU;mBAAlB,IAAI,EAAE;;;;;;;;;;;AAIrC;AAEA,SAAS,iBAAiB,EAAE,QAAQ,EAAE;IACpC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,aAAa,IAAA,+MAAM,EAAC;IAC1B,MAAM,SAAS,GAAG,SAAS,EAAE,CAAC,KAAK,CAAC;IAEpC,MAAM,aAAa,IAAA,oNAAW,EAAC;QAC7B,IAAI,WAAW,OAAO,EAAE,aAAa,WAAW,OAAO;QACvD,QAAQ;IACV,GAAG,EAAE;IACL,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC9B,IAAI,WAAW,OAAO,EAAE,aAAa,WAAW,OAAO;QACvD,WAAW,OAAO,GAAG,WAAW,IAAM,QAAQ,QAAQ;IACxD,GAAG,EAAE;IACL,MAAM,SAAS,IAAA,oNAAW,EAAC,IAAM,QAAQ,CAAC,IAAM,CAAC,IAAI,EAAE;IAEvD,MAAM,OAAO,SAAS,IAAI;IAE1B,qBACE,8OAAC;QACC,WAAU;QACV,cAAc;QACd,cAAc;QACd,SAAS;QACT,QAAQ;;0BAER,8OAAC;gBACC,MAAK;gBACL,SAAS;gBACT,iBAAc;gBACd,iBAAe;gBACf,iBAAe;gBACf,WAAW,IAAA,kHAAE,EACX,qDACA;;oBAGD,qBAAO,8OAAC;wBAAK,WAAU;;;;;+BAAe;oBACtC,SAAS,KAAK;kCACf,8OAAC,mOAAW;wBAAC,WAAW,CAAC,6BAA6B,EAAE,OAAO,eAAe,IAAI;;;;;;;;;;;;0BAGpF,8OAAC;gBACC,IAAI;gBACJ,MAAK;gBACL,WAAW,CAAC;QACZ,EAAE,OAAO,8BAA8B,gDAAgD;0BAEtF,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC,mBACnB,8OAAC,uKAAI;wBAEH,MAAM,GAAG,IAAI;wBACb,MAAK;wBACL,WAAU;;4BAET,GAAG,IAAI,iBAAG,8OAAC,GAAG,IAAI;gCAAC,WAAU;;;;;uCAAe;0CAC7C,8OAAC;0CAAM,GAAG,KAAK;;;;;;;uBANV,GAAG,IAAI;;;;;;;;;;;;;;;;AAYxB","debugId":null}},
    {"offset": {"line": 1043, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/layout/navbar/AvatarButton.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { UserRound } from \"lucide-react\";\r\n\r\nfunction initialsFrom(name, email) {\r\n  const src = (name && name.trim()) || (email && email.split(\"@\")[0]) || \"\";\r\n  if (!src) return \"?\";\r\n  const parts = src.split(/\\s+/).filter(Boolean);\r\n  const pick =\r\n    parts.length >= 2\r\n      ? parts[0][0] + parts[parts.length - 1][0]\r\n      : src.slice(0, 2);\r\n  return pick.toUpperCase();\r\n}\r\n\r\nexport default function AvatarButton({\r\n  href = \"/me\",\r\n  name,\r\n  email,\r\n  photo,\r\n  fetchUrl = null,\r\n  onClick,\r\n  className,\r\n  fallback = \"icon\",\r\n  version,\r\n}) {\r\n  const [autoPhoto, setAutoPhoto] = useState(null);\r\n  const [imgError, setImgError] = useState(false);\r\n\r\n  const currentBlobUrl = useRef(null);\r\n  const urlsToRevoke = useRef([]);\r\n\r\n  // ทำ URL สำหรับ cache-busting\r\n  const photoWithTs = useMemo(() => {\r\n    if (!photo) return null;\r\n    try {\r\n      const u = new URL(\r\n        photo,\r\n        typeof window !== \"undefined\"\r\n          ? window.location.origin\r\n          : \"http://localhost\"\r\n      );\r\n      if (version) u.searchParams.set(\"ts\", String(version));\r\n      return u.toString();\r\n    } catch {\r\n      const hasQ = photo.includes(\"?\");\r\n      return version\r\n        ? `${photo}${hasQ ? \"&\" : \"?\"}ts=${encodeURIComponent(String(version))}`\r\n        : photo;\r\n    }\r\n  }, [photo, version]);\r\n\r\n  useEffect(() => {\r\n    let aborted = false;\r\n    const ctrl = new AbortController();\r\n\r\n    async function load() {\r\n      setImgError(false);\r\n      if (photoWithTs || !fetchUrl) return;\r\n\r\n      try {\r\n        const API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || \"\";\r\n        const absUrl = fetchUrl.startsWith(\"http\")\r\n          ? fetchUrl\r\n          : `${API_BASE}${fetchUrl.startsWith(\"/\") ? \"\" : \"/\"}${fetchUrl}`;\r\n        const hasQ = absUrl.includes(\"?\");\r\n        const url = `${absUrl}${\r\n          version\r\n            ? `${hasQ ? \"&\" : \"?\"}ts=${encodeURIComponent(String(version))}`\r\n            : \"\"\r\n        }`;\r\n\r\n        const r = await fetch(url, {\r\n          signal: ctrl.signal,\r\n          cache: \"no-store\",\r\n          credentials: \"include\",\r\n        });\r\n        if (!r.ok) {\r\n          setImgError(true);\r\n          return;\r\n        }\r\n\r\n        const ct = r.headers.get(\"content-type\") || \"\";\r\n        if (!ct.toLowerCase().startsWith(\"image/\")) {\r\n          setImgError(true);\r\n          return;\r\n        }\r\n\r\n        const b = await r.blob();\r\n        if (aborted) return;\r\n        const blobUrl = URL.createObjectURL(b);\r\n\r\n        if (currentBlobUrl.current)\r\n          urlsToRevoke.current.push(currentBlobUrl.current);\r\n        currentBlobUrl.current = blobUrl;\r\n        setAutoPhoto(blobUrl);\r\n      } catch {\r\n        if (!aborted) setImgError(true);\r\n      }\r\n    }\r\n\r\n    load();\r\n\r\n    return () => {\r\n      aborted = true;\r\n      ctrl.abort();\r\n      if (currentBlobUrl.current) {\r\n        urlsToRevoke.current.push(currentBlobUrl.current);\r\n        currentBlobUrl.current = null;\r\n      }\r\n      while (urlsToRevoke.current.length) {\r\n        const u = urlsToRevoke.current.pop();\r\n        try {\r\n          URL.revokeObjectURL(u);\r\n        } catch {}\r\n      }\r\n    };\r\n  }, [photoWithTs, fetchUrl, version]);\r\n\r\n  const resolved = !imgError ? photoWithTs ?? autoPhoto : null;\r\n  const isBlob = typeof resolved === \"string\" && resolved.startsWith(\"blob:\");\r\n  const showIconFallback = !resolved && fallback === \"icon\";\r\n\r\n  const handleLoaded = useCallback(() => {\r\n    while (urlsToRevoke.current.length) {\r\n      const u = urlsToRevoke.current.pop();\r\n      try {\r\n        URL.revokeObjectURL(u);\r\n      } catch {}\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Link\r\n      href={href}\r\n      onClick={onClick}\r\n      aria-label=\"Open account page\"\r\n      title={name || email || \"Account\"}\r\n      className={cn(\r\n        \"relative inline-flex h-9 w-9 items-center justify-center overflow-hidden rounded-full\",\r\n        \"ring-offset-2 hover:ring-2 ring-black dark:ring-white dark:ring-offset-black\",\r\n        \"bg-neutral-200 text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200\",\r\n        className\r\n      )}\r\n    >\r\n      {resolved ? (\r\n        isBlob ? (\r\n          <img\r\n            src={resolved}\r\n            alt={name || email || \"avatar\"}\r\n            className=\"h-full w-full object-cover\"\r\n            referrerPolicy=\"no-referrer\"\r\n            crossOrigin=\"anonymous\"\r\n            onLoad={handleLoaded}\r\n            onError={() => setImgError(true)}\r\n          />\r\n        ) : (\r\n          <Image\r\n            src={resolved}\r\n            alt={name || email || \"avatar\"}\r\n            className=\"h-full w-full object-cover\"\r\n            fill\r\n            sizes=\"36px\"\r\n            priority\r\n            unoptimized\r\n            referrerPolicy=\"no-referrer\"\r\n            onLoadingComplete={handleLoaded}\r\n            onError={() => setImgError(true)}\r\n          />\r\n        )\r\n      ) : showIconFallback ? (\r\n        <UserRound className=\"h-5 w-5 opacity-80\" aria-hidden=\"true\" />\r\n      ) : (\r\n        <span className=\"select-none text-xs font-semibold\">\r\n          {initialsFrom(name, email)}\r\n        </span>\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,SAAS,aAAa,IAAI,EAAE,KAAK;IAC/B,MAAM,MAAM,AAAC,QAAQ,KAAK,IAAI,MAAQ,SAAS,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE,IAAK;IACvE,IAAI,CAAC,KAAK,OAAO;IACjB,MAAM,QAAQ,IAAI,KAAK,CAAC,OAAO,MAAM,CAAC;IACtC,MAAM,OACJ,MAAM,MAAM,IAAI,IACZ,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE,GACxC,IAAI,KAAK,CAAC,GAAG;IACnB,OAAO,KAAK,WAAW;AACzB;AAEe,SAAS,aAAa,EACnC,OAAO,KAAK,EACZ,IAAI,EACJ,KAAK,EACL,KAAK,EACL,WAAW,IAAI,EACf,OAAO,EACP,SAAS,EACT,WAAW,MAAM,EACjB,OAAO,EACR;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,iBAAiB,IAAA,+MAAM,EAAC;IAC9B,MAAM,eAAe,IAAA,+MAAM,EAAC,EAAE;IAE9B,8BAA8B;IAC9B,MAAM,cAAc,IAAA,gNAAO,EAAC;QAC1B,IAAI,CAAC,OAAO,OAAO;QACnB,IAAI;YACF,MAAM,IAAI,IAAI,IACZ,OACA,sCACI,0BACA;YAEN,IAAI,SAAS,EAAE,YAAY,CAAC,GAAG,CAAC,MAAM,OAAO;YAC7C,OAAO,EAAE,QAAQ;QACnB,EAAE,OAAM;YACN,MAAM,OAAO,MAAM,QAAQ,CAAC;YAC5B,OAAO,UACH,GAAG,QAAQ,OAAO,MAAM,IAAI,GAAG,EAAE,mBAAmB,OAAO,WAAW,GACtE;QACN;IACF,GAAG;QAAC;QAAO;KAAQ;IAEnB,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;QACd,MAAM,OAAO,IAAI;QAEjB,eAAe;YACb,YAAY;YACZ,IAAI,eAAe,CAAC,UAAU;YAE9B,IAAI;gBACF,MAAM,WAAW,6DAAwC;gBACzD,MAAM,SAAS,SAAS,UAAU,CAAC,UAC/B,WACA,GAAG,WAAW,SAAS,UAAU,CAAC,OAAO,KAAK,MAAM,UAAU;gBAClE,MAAM,OAAO,OAAO,QAAQ,CAAC;gBAC7B,MAAM,MAAM,GAAG,SACb,UACI,GAAG,OAAO,MAAM,IAAI,GAAG,EAAE,mBAAmB,OAAO,WAAW,GAC9D,IACJ;gBAEF,MAAM,IAAI,MAAM,MAAM,KAAK;oBACzB,QAAQ,KAAK,MAAM;oBACnB,OAAO;oBACP,aAAa;gBACf;gBACA,IAAI,CAAC,EAAE,EAAE,EAAE;oBACT,YAAY;oBACZ;gBACF;gBAEA,MAAM,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB;gBAC5C,IAAI,CAAC,GAAG,WAAW,GAAG,UAAU,CAAC,WAAW;oBAC1C,YAAY;oBACZ;gBACF;gBAEA,MAAM,IAAI,MAAM,EAAE,IAAI;gBACtB,IAAI,SAAS;gBACb,MAAM,UAAU,IAAI,eAAe,CAAC;gBAEpC,IAAI,eAAe,OAAO,EACxB,aAAa,OAAO,CAAC,IAAI,CAAC,eAAe,OAAO;gBAClD,eAAe,OAAO,GAAG;gBACzB,aAAa;YACf,EAAE,OAAM;gBACN,IAAI,CAAC,SAAS,YAAY;YAC5B;QACF;QAEA;QAEA,OAAO;YACL,UAAU;YACV,KAAK,KAAK;YACV,IAAI,eAAe,OAAO,EAAE;gBAC1B,aAAa,OAAO,CAAC,IAAI,CAAC,eAAe,OAAO;gBAChD,eAAe,OAAO,GAAG;YAC3B;YACA,MAAO,aAAa,OAAO,CAAC,MAAM,CAAE;gBAClC,MAAM,IAAI,aAAa,OAAO,CAAC,GAAG;gBAClC,IAAI;oBACF,IAAI,eAAe,CAAC;gBACtB,EAAE,OAAM,CAAC;YACX;QACF;IACF,GAAG;QAAC;QAAa;QAAU;KAAQ;IAEnC,MAAM,WAAW,CAAC,WAAW,eAAe,YAAY;IACxD,MAAM,SAAS,OAAO,aAAa,YAAY,SAAS,UAAU,CAAC;IACnE,MAAM,mBAAmB,CAAC,YAAY,aAAa;IAEnD,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,MAAO,aAAa,OAAO,CAAC,MAAM,CAAE;YAClC,MAAM,IAAI,aAAa,OAAO,CAAC,GAAG;YAClC,IAAI;gBACF,IAAI,eAAe,CAAC;YACtB,EAAE,OAAM,CAAC;QACX;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC,uKAAI;QACH,MAAM;QACN,SAAS;QACT,cAAW;QACX,OAAO,QAAQ,SAAS;QACxB,WAAW,IAAA,kHAAE,EACX,yFACA,gFACA,6EACA;kBAGD,WACC,uBACE,8OAAC;YACC,KAAK;YACL,KAAK,QAAQ,SAAS;YACtB,WAAU;YACV,gBAAe;YACf,aAAY;YACZ,QAAQ;YACR,SAAS,IAAM,YAAY;;;;;iCAG7B,8OAAC,wIAAK;YACJ,KAAK;YACL,KAAK,QAAQ,SAAS;YACtB,WAAU;YACV,IAAI;YACJ,OAAM;YACN,QAAQ;YACR,WAAW;YACX,gBAAe;YACf,mBAAmB;YACnB,SAAS,IAAM,YAAY;;;;;mBAG7B,iCACF,8OAAC,6NAAS;YAAC,WAAU;YAAqB,eAAY;;;;;iCAEtD,8OAAC;YAAK,WAAU;sBACb,aAAa,MAAM;;;;;;;;;;;AAK9B","debugId":null}},
    {"offset": {"line": 1211, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/layout/navbar/MobileMenu.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\nimport AvatarButton from \"./AvatarButton\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport StatefulButton from \"@/components/ui/stateful-button\";\r\nimport ThemeToggle from \"@/components/ui/ThemeToggle\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { BASE_LINKS, visibleCategories } from \"@/config/routes\";\r\nimport { ChevronDown } from \"lucide-react\";\r\nimport { MobileNavItem } from \"./NavItem\";\r\n\r\nexport function MobileMenu({ open, onClose }) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const { user, loading, signOut } = useAuth();\r\n  const categories = visibleCategories(user);\r\n\r\n  const [openId, setOpenId] = useState(null);\r\n  const toggle = (id) => setOpenId((v) => (v === id ? null : id));\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        initial={{ opacity: 0, height: 0, y: -6 }}\r\n        animate={{ opacity: 1, height: \"auto\", y: 0 }}\r\n        exit={{ opacity: 0, height: 0, y: -6 }}\r\n        transition={{ duration: 0.22 }}\r\n        className=\"lg:hidden z-[55] overflow-hidden bg-white dark:bg-neutral-900 shadow-xl border border-black/10 dark:border-white/10 rounded-2xl mx-3 mt-2\"\r\n      >\r\n        <div className=\"flex flex-col p-4 gap-1\">\r\n          {BASE_LINKS.map((item) => (\r\n            <MobileNavItem key={item.href} item={item} onClick={onClose} />\r\n          ))}\r\n\r\n          {categories.map((cat) => (\r\n            <CategoryGroup\r\n              key={cat.id}\r\n              category={cat}\r\n              open={openId === cat.id}\r\n              onToggle={() => toggle(cat.id)}\r\n              onItemClick={onClose}\r\n            />\r\n          ))}\r\n\r\n          <div className=\"my-2 h-px bg-black/10 dark:bg-white/10\" />\r\n\r\n          <div className=\"mt-2 space-y-3\">\r\n            <div className=\"flex flex-col gap-3 rounded-xl bg-black/5 px-3 py-2 dark:bg-white/5\">\r\n              {user && (\r\n                <div className=\"flex items-center gap-3\">\r\n                  <AvatarButton\r\n                    name={user?.name}\r\n                    email={user?.email}\r\n                    fetchUrl={user?.id ? `/api/files/avatar/${user.id}` : undefined}\r\n                    onClick={onClose}\r\n                  />\r\n                  <div className=\"min-w-0\">\r\n                    <Link\r\n                      href=\"/me\"\r\n                      onClick={onClose}\r\n                      className=\"block truncate text-sm font-medium text-gray-900 hover:underline dark:text-gray-100\"\r\n                    >\r\n                      {user.name || user.email}\r\n                    </Link>\r\n                    <div className=\"truncate text-xs text-gray-500 dark:text-gray-400\">\r\n                      Account\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"truncate text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n                {user ? user.email : \"พร้อมใช้งาน\"}\r\n              </div>\r\n\r\n              {loading ? (\r\n                <div className=\"h-9 w-full animate-pulse rounded-full bg-black/10 dark:bg-white/10\" />\r\n              ) : user ? (\r\n                <StatefulButton\r\n                  className=\"h-9 w-full rounded-full\"\r\n                  loadingText=\"Signing out...\"\r\n                  onClick={() =>\r\n                    signOut().then(() => {\r\n                      onClose();\r\n                      router.push(\"/auth/login\");\r\n                    })\r\n                  }\r\n                >\r\n                  Sign Out\r\n                </StatefulButton>\r\n              ) : (\r\n                <Button\r\n                  className=\"h-9 w-full rounded-full\"\r\n                  onClick={() => {\r\n                    onClose();\r\n                    router.push(`/auth/login?callbackUrl=${encodeURIComponent(pathname || \"/\")}`);\r\n                  }}\r\n                >\r\n                  Get Started\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"px-3\">\r\n              <ThemeToggle />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"h-3\" style={{ paddingBottom: \"env(safe-area-inset-bottom)\" }} />\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\nfunction CategoryGroup({ category, open, onToggle, onItemClick }) {\r\n  const Icon = category.icon;\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        aria-expanded={open}\r\n        aria-controls={`${category.id}-group`}\r\n        onClick={onToggle}\r\n        className=\"flex w-full items-center justify-between rounded-md px-3 py-2.5 text-left text-gray-700 hover:bg-black/5 dark:text-gray-300 dark:hover:bg:white/5 dark:hover:bg-white/5\"\r\n      >\r\n        <span className=\"flex items-center gap-3\">\r\n          {Icon ? <Icon className=\"h-5 w-5\" /> : null}\r\n          {category.label}\r\n        </span>\r\n        <ChevronDown className={`h-4 w-4 transition-transform ${open ? \"rotate-180\" : \"\"}`} />\r\n      </button>\r\n\r\n      <AnimatePresence initial={false}>\r\n        {open && (\r\n          <motion.div\r\n            id={`${category.id}-group`}\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: \"auto\", opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ duration: 0.18 }}\r\n            className=\"overflow-hidden\"\r\n          >\r\n            <div className=\"ml-8 mt-1 flex flex-col gap-1 border-l border-black/10 pl-3 dark:border-white/10\">\r\n              {category.links.map((it) => (\r\n                <Link\r\n                  key={it.href}\r\n                  href={it.href}\r\n                  onClick={onItemClick}\r\n                  className=\"flex items-center gap-3 rounded-md px-3 py-2.5 text-gray-700 hover:bg-black/5 dark:text-gray-300 dark:hover:bg-white/5\"\r\n                >\r\n                  {it.icon ? <it.icon className=\"h-5 w-5\" /> : null}\r\n                  {it.label}\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1547, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/modal/Modal.jsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst SIZES = {\r\n  sm: \"max-w-sm\",\r\n  md: \"max-w-md\",\r\n  lg: \"max-w-lg\",\r\n  xl: \"max-w-2xl\",\r\n  fullscreen: \"max-w-[96vw] h-[96vh]\",\r\n};\r\n\r\nexport default function Modal({\r\n  open,\r\n  title,\r\n  children,\r\n  onClose,\r\n  size = \"lg\", // <-- มาตรฐาน\r\n  footer = null, // <-- เพิ่ม footer slot\r\n  dismissable = true, // <-- คลิกฉากหลังเพื่อปิด\r\n}) {\r\n  const [mounted, setMounted] = React.useState(false);\r\n  React.useEffect(() => setMounted(true), []);\r\n\r\n  if (!mounted || !open) return null;\r\n\r\n  const node = (\r\n    <div\r\n      className=\"fixed inset-0 z-[1000] flex items-center justify-center\"\r\n      aria-modal=\"true\"\r\n      role=\"dialog\"\r\n    >\r\n      {/* Overlay */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/40 dark:bg-black/60\"\r\n        onClick={dismissable ? onClose : undefined}\r\n        aria-hidden\r\n      />\r\n      {/* Panel */}\r\n      <div\r\n        className={[\r\n          \"relative mx-4 w-full\",\r\n          SIZES[size] || SIZES.lg,\r\n          \"rounded-2xl border shadow-xl\",\r\n          \"bg-white text-neutral-900 border-neutral-200\",\r\n          \"dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700\",\r\n        ].join(\" \")}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Header */}\r\n        {(title || onClose) && (\r\n          <div className=\"flex items-center justify-between gap-4 px-5 pt-4\">\r\n            <h3 className=\"text-base font-semibold\">{title}</h3>\r\n            {onClose && (\r\n              <button\r\n                onClick={onClose}\r\n                className=\"rounded-md px-2 py-1 text-sm text-neutral-600 hover:bg-neutral-100\r\n                           dark:text-neutral-300 dark:hover:bg-neutral-800\"\r\n                aria-label=\"ปิด\"\r\n              >\r\n                ปิด\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n        {/* Body */}\r\n        <div className=\"px-5 py-4\">{children}</div>\r\n        {/* Footer */}\r\n        {footer && (\r\n          <div className=\"flex items-center justify-end gap-2 px-5 pb-4\">\r\n            {footer}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const root = typeof window !== \"undefined\" ? document.body : null;\r\n  return root ? createPortal(node, root) : node;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,MAAM,QAAQ;IACZ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,YAAY;AACd;AAEe,SAAS,MAAM,EAC5B,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,OAAO,EACP,OAAO,IAAI,EACX,SAAS,IAAI,EACb,cAAc,IAAI,EACnB;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,iNAAc,CAAC;IAC7C,kNAAe,CAAC,IAAM,WAAW,OAAO,EAAE;IAE1C,IAAI,CAAC,WAAW,CAAC,MAAM,OAAO;IAE9B,MAAM,qBACJ,8OAAC;QACC,WAAU;QACV,cAAW;QACX,MAAK;;0BAGL,8OAAC;gBACC,WAAU;gBACV,SAAS,cAAc,UAAU;gBACjC,aAAW;;;;;;0BAGb,8OAAC;gBACC,WAAW;oBACT;oBACA,KAAK,CAAC,KAAK,IAAI,MAAM,EAAE;oBACvB;oBACA;oBACA;iBACD,CAAC,IAAI,CAAC;gBACP,SAAS,CAAC,IAAM,EAAE,eAAe;;oBAGhC,CAAC,SAAS,OAAO,mBAChB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2B;;;;;;4BACxC,yBACC,8OAAC;gCACC,SAAS;gCACT,WAAU;gCAEV,cAAW;0CACZ;;;;;;;;;;;;kCAOP,8OAAC;wBAAI,WAAU;kCAAa;;;;;;oBAE3B,wBACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;;;;;;;IAOX,MAAM,OAAO,sCAAgC,0BAAgB;IAC7D,OAAO,oDAAO,0BAA2B;AAC3C","debugId":null}},
    {"offset": {"line": 1655, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/modal/ConfirmDialog.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport Modal from \"@/components/modal/Modal\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport default function ConfirmDialog({\r\n  open,\r\n  title = \"ยืนยันการทำรายการ\",\r\n  description,\r\n  confirmText = \"ยืนยัน\",\r\n  cancelText = \"ยกเลิก\",\r\n  loading = false,\r\n  error,\r\n  onCancel,\r\n  onConfirm,\r\n}) {\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={onCancel}\r\n      title={title}\r\n      size=\"md\"\r\n      footer={\r\n        <>\r\n          <Button variant=\"outline\" onClick={onCancel} disabled={loading}>\r\n            {cancelText}\r\n          </Button>\r\n          <Button\r\n            onClick={onConfirm}\r\n            disabled={loading}\r\n            aria-busy={loading || undefined}\r\n          >\r\n            {loading ? \"กำลังดำเนินการ…\" : confirmText}\r\n          </Button>\r\n        </>\r\n      }\r\n    >\r\n      {description && (\r\n        <p className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n          {description}\r\n        </p>\r\n      )}\r\n      {error && (\r\n        <div\r\n          className=\"mt-3 rounded border px-3 py-2 text-sm\r\n                        border-red-300 bg-red-50 text-red-800\r\n                        dark:border-red-700 dark:bg-red-900 dark:text-red-100\"\r\n        >\r\n          {error}\r\n        </div>\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,cAAc,EACpC,IAAI,EACJ,QAAQ,mBAAmB,EAC3B,WAAW,EACX,cAAc,QAAQ,EACtB,aAAa,QAAQ,EACrB,UAAU,KAAK,EACf,KAAK,EACL,QAAQ,EACR,SAAS,EACV;IACC,qBACE,8OAAC,wIAAK;QACJ,MAAM;QACN,SAAS;QACT,OAAO;QACP,MAAK;QACL,sBACE;;8BACE,8OAAC,qIAAM;oBAAC,SAAQ;oBAAU,SAAS;oBAAU,UAAU;8BACpD;;;;;;8BAEH,8OAAC,qIAAM;oBACL,SAAS;oBACT,UAAU;oBACV,aAAW,WAAW;8BAErB,UAAU,oBAAoB;;;;;;;;;YAKpC,6BACC,8OAAC;gBAAE,WAAU;0BACV;;;;;;YAGJ,uBACC,8OAAC;gBACC,WAAU;0BAIT;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 1726, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useConfirm.js"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport ConfirmDialog from \"@/components/modal/ConfirmDialog\";\r\n\r\nexport function useConfirm() {\r\n  const [state, setState] = React.useState({\r\n    open: false,\r\n    title: \"\",\r\n    description: \"\",\r\n    confirmText: \"ยืนยัน\",\r\n    cancelText: \"ยกเลิก\",\r\n    loading: false,\r\n    error: null,\r\n    resolve: null,\r\n  });\r\n\r\n  const confirm = React.useCallback((opts = {}) => {\r\n    return new Promise((resolve) => {\r\n      setState((s) => ({\r\n        ...s,\r\n        open: true,\r\n        resolve,\r\n        ...opts,\r\n        loading: false,\r\n        error: null,\r\n      }));\r\n    });\r\n  }, []);\r\n\r\n  const handleCancel = () => {\r\n    state.resolve?.(false);\r\n    setState((s) => ({ ...s, open: false }));\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (!state.onConfirm) {\r\n      state.resolve?.(true);\r\n      setState((s) => ({ ...s, open: false }));\r\n      return;\r\n    }\r\n    try {\r\n      setState((s) => ({ ...s, loading: true, error: null }));\r\n      await state.onConfirm();\r\n      state.resolve?.(true);\r\n      setState((s) => ({ ...s, open: false, loading: false }));\r\n    } catch (e) {\r\n      setState((s) => ({\r\n        ...s,\r\n        loading: false,\r\n        error: e instanceof Error ? e.message : String(e || \"เกิดข้อผิดพลาด\"),\r\n      }));\r\n    }\r\n  };\r\n\r\n  const dialog = (\r\n    <ConfirmDialog\r\n      open={state.open}\r\n      title={state.title}\r\n      description={state.description}\r\n      confirmText={state.confirmText}\r\n      cancelText={state.cancelText}\r\n      loading={state.loading}\r\n      error={state.error}\r\n      onCancel={handleCancel}\r\n      onConfirm={handleConfirm}\r\n    />\r\n  );\r\n\r\n  return { confirm, dialog };\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,gNAAK,CAAC,QAAQ,CAAC;QACvC,MAAM;QACN,OAAO;QACP,aAAa;QACb,aAAa;QACb,YAAY;QACZ,SAAS;QACT,OAAO;QACP,SAAS;IACX;IAEA,MAAM,UAAU,gNAAK,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC;QAC1C,OAAO,IAAI,QAAQ,CAAC;YAClB,SAAS,CAAC,IAAM,CAAC;oBACf,GAAG,CAAC;oBACJ,MAAM;oBACN;oBACA,GAAG,IAAI;oBACP,SAAS;oBACT,OAAO;gBACT,CAAC;QACH;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,MAAM,OAAO,GAAG;QAChB,SAAS,CAAC,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,MAAM;YAAM,CAAC;IACxC;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,MAAM,SAAS,EAAE;YACpB,MAAM,OAAO,GAAG;YAChB,SAAS,CAAC,IAAM,CAAC;oBAAE,GAAG,CAAC;oBAAE,MAAM;gBAAM,CAAC;YACtC;QACF;QACA,IAAI;YACF,SAAS,CAAC,IAAM,CAAC;oBAAE,GAAG,CAAC;oBAAE,SAAS;oBAAM,OAAO;gBAAK,CAAC;YACrD,MAAM,MAAM,SAAS;YACrB,MAAM,OAAO,GAAG;YAChB,SAAS,CAAC,IAAM,CAAC;oBAAE,GAAG,CAAC;oBAAE,MAAM;oBAAO,SAAS;gBAAM,CAAC;QACxD,EAAE,OAAO,GAAG;YACV,SAAS,CAAC,IAAM,CAAC;oBACf,GAAG,CAAC;oBACJ,SAAS;oBACT,OAAO,aAAa,QAAQ,EAAE,OAAO,GAAG,OAAO,KAAK;gBACtD,CAAC;QACH;IACF;IAEA,MAAM,uBACJ,8OAAC,gJAAa;QACZ,MAAM,MAAM,IAAI;QAChB,OAAO,MAAM,KAAK;QAClB,aAAa,MAAM,WAAW;QAC9B,aAAa,MAAM,WAAW;QAC9B,YAAY,MAAM,UAAU;QAC5B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;QAClB,UAAU;QACV,WAAW;;;;;;IAIf,OAAO;QAAE;QAAS;IAAO;AAC3B","debugId":null}},
    {"offset": {"line": 1821, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/layout/navbar/Navbar.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { Menu, X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ThemeToggle from \"@/components/ui/ThemeToggle\";\r\nimport StatefulButton from \"@/components/ui/stateful-button\";\r\nimport { NavLinks } from \"./NavLinks\";\r\nimport AvatarButton from \"./AvatarButton\";\r\nimport { MobileMenu } from \"./MobileMenu\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { useConfirm } from \"@/hooks/useConfirm\";\r\n\r\nexport default function Navbar() {\r\n  const [open, setOpen] = useState(false);\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const { user, loading, signOut } = useAuth();\r\n  const { confirm, dialog } = useConfirm();\r\n\r\n  async function handleSignOut() {\r\n    const ok = await confirm({\r\n      title: \"ออกจากระบบ\",\r\n      description: \"คุณต้องการออกจากระบบใช่ไหม?\",\r\n      confirmText: \"ออกจากระบบ\",\r\n      cancelText: \"ยกเลิก\",\r\n      onConfirm: async () => {\r\n        await signOut();\r\n      },\r\n    });\r\n    if (ok) router.push(\"/auth/login\");\r\n  }\r\n\r\n  return (\r\n    <nav\r\n      className={cn(\r\n        \"fixed top-0 left-0 right-0 z-50\",\r\n        \"backdrop-blur-md shadow-sm\",\r\n        \"bg-gradient-to-r from-white/80 to-gray-100/80 dark:from-black/60 dark:to-gray-900/60\"\r\n      )}\r\n    >\r\n      <div className=\"mx-auto flex h-16 max-w-7xl items-center justify-between px-4 lg:px-8\">\r\n        <Link href=\"/\" className=\"text-xl font-bold\">\r\n          EMP\r\n        </Link>\r\n\r\n        {/* Desktop */}\r\n        <div className=\"hidden lg:flex items-center w-full\">\r\n          <NavLinks />\r\n          <div className=\"ml-auto flex items-center gap-3\">\r\n            {user && (\r\n              <AvatarButton\r\n                name={user?.name}\r\n                email={user?.email}\r\n                fetchUrl={user?.id ? `/api/files/avatar/${user.id}` : undefined}\r\n              />\r\n            )}\r\n            <ThemeToggle />\r\n            {loading ? (\r\n              <div className=\"h-9 w-28 animate-pulse rounded-full bg-black/10 dark:bg-white/10\" />\r\n            ) : user ? (\r\n              <StatefulButton\r\n                className=\"h-9 rounded-full\"\r\n                loadingText=\"กำลังออกจากระบบ...\"\r\n                onClick={handleSignOut}\r\n              >\r\n                ออกจากระบบ\r\n              </StatefulButton>\r\n            ) : (\r\n              <Button\r\n                className=\"h-9 rounded-full\"\r\n                onClick={() =>\r\n                  router.push(`/auth/login?callbackUrl=${encodeURIComponent(pathname || \"/\")}`)\r\n                }\r\n              >\r\n                เข้าสู่ระบบ\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile Toggle */}\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={() => setOpen((v) => !v)}\r\n          className=\"lg:hidden p-2 rounded-md hover:bg-gray-100 dark:hover:bg-neutral-800\"\r\n          aria-label=\"Toggle navigation menu\"\r\n        >\r\n          {open ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Mobile Menu */}\r\n      <MobileMenu open={open} onClose={() => setOpen(false)} />\r\n\r\n      {/* โมดัลยืนยัน */}\r\n      {dialog}\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;;;;;;;;;;;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,2HAAO;IAC1C,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,iIAAU;IAEtC,eAAe;QACb,MAAM,KAAK,MAAM,QAAQ;YACvB,OAAO;YACP,aAAa;YACb,aAAa;YACb,YAAY;YACZ,WAAW;gBACT,MAAM;YACR;QACF;QACA,IAAI,IAAI,OAAO,IAAI,CAAC;IACtB;IAEA,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,mCACA,8BACA;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAoB;;;;;;kCAK7C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uJAAQ;;;;;0CACT,8OAAC;gCAAI,WAAU;;oCACZ,sBACC,8OAAC,0JAAY;wCACX,MAAM,MAAM;wCACZ,OAAO,MAAM;wCACb,UAAU,MAAM,KAAK,CAAC,kBAAkB,EAAE,KAAK,EAAE,EAAE,GAAG;;;;;;kDAG1D,8OAAC,2IAAW;;;;;oCACX,wBACC,8OAAC;wCAAI,WAAU;;;;;+CACb,qBACF,8OAAC,kJAAc;wCACb,WAAU;wCACV,aAAY;wCACZ,SAAS;kDACV;;;;;6DAID,8OAAC,qIAAM;wCACL,WAAU;wCACV,SAAS,IACP,OAAO,IAAI,CAAC,CAAC,wBAAwB,EAAE,mBAAmB,YAAY,MAAM;kDAE/E;;;;;;;;;;;;;;;;;;kCAQP,8OAAC,qIAAM;wBACL,SAAQ;wBACR,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;wBAC/B,WAAU;wBACV,cAAW;kCAEV,qBAAO,8OAAC,iMAAC;4BAAC,WAAU;;;;;iDAAe,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKxD,8OAAC,2JAAU;gBAAC,MAAM;gBAAM,SAAS,IAAM,QAAQ;;;;;;YAG9C;;;;;;;AAGP","debugId":null}}]
}