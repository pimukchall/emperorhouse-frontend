{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/background-gradient.jsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\r\nimport React from \"react\";\r\nimport { motion } from \"motion/react\";\r\n\r\nexport const BackgroundGradient = ({\r\n  children,\r\n  className,\r\n  containerClassName,\r\n  animate = true\r\n}) => {\r\n  const variants = {\r\n    initial: {\r\n      backgroundPosition: \"0 50%\",\r\n    },\r\n    animate: {\r\n      backgroundPosition: [\"0, 50%\", \"100% 50%\", \"0 50%\"],\r\n    },\r\n  };\r\n  return (\r\n    <div className={cn(\"relative p-[4px] group\", containerClassName)}>\r\n      <motion.div\r\n        variants={animate ? variants : undefined}\r\n        initial={animate ? \"initial\" : undefined}\r\n        animate={animate ? \"animate\" : undefined}\r\n        transition={\r\n          animate\r\n            ? {\r\n                duration: 5,\r\n                repeat: Infinity,\r\n                repeatType: \"reverse\",\r\n              }\r\n            : undefined\r\n        }\r\n        style={{\r\n          backgroundSize: animate ? \"400% 400%\" : undefined,\r\n        }}\r\n        className={cn(\r\n          \"absolute inset-0 rounded-3xl z-[1] opacity-60 group-hover:opacity-100 blur-xl  transition duration-500 will-change-transform\",\r\n          \" bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]\"\r\n        )} />\r\n      <motion.div\r\n        variants={animate ? variants : undefined}\r\n        initial={animate ? \"initial\" : undefined}\r\n        animate={animate ? \"animate\" : undefined}\r\n        transition={\r\n          animate\r\n            ? {\r\n                duration: 5,\r\n                repeat: Infinity,\r\n                repeatType: \"reverse\",\r\n              }\r\n            : undefined\r\n        }\r\n        style={{\r\n          backgroundSize: animate ? \"400% 400%\" : undefined,\r\n        }}\r\n        className={cn(\r\n          \"absolute inset-0 rounded-3xl z-[1] will-change-transform\",\r\n          \"bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]\"\r\n        )} />\r\n      <div className={cn(\"relative z-10\", className)}>{children}</div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,qBAAqB,CAAC,EACjC,QAAQ,EACR,SAAS,EACT,kBAAkB,EAClB,UAAU,IAAI,EACf;IACC,MAAM,WAAW;QACf,SAAS;YACP,oBAAoB;QACtB;QACA,SAAS;YACP,oBAAoB;gBAAC;gBAAU;gBAAY;aAAQ;QACrD;IACF;IACA,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,0BAA0B;;0BAC3C,8OAAC,oMAAM,CAAC,GAAG;gBACT,UAAU,UAAU,WAAW;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,YACE,UACI;oBACE,UAAU;oBACV,QAAQ;oBACR,YAAY;gBACd,IACA;gBAEN,OAAO;oBACL,gBAAgB,UAAU,cAAc;gBAC1C;gBACA,WAAW,IAAA,kHAAE,EACX,gIACA;;;;;;0BAEJ,8OAAC,oMAAM,CAAC,GAAG;gBACT,UAAU,UAAU,WAAW;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,YACE,UACI;oBACE,UAAU;oBACV,QAAQ;oBACR,YAAY;gBACd,IACA;gBAEN,OAAO;oBACL,gBAAgB,UAAU,cAAc;gBAC1C;gBACA,WAAW,IAAA,kHAAE,EACX,4DACA;;;;;;0BAEJ,8OAAC;gBAAI,WAAW,IAAA,kHAAE,EAAC,iBAAiB;0BAAa;;;;;;;;;;;;AAGvD","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/modal/NoticeDialog.jsx"],"sourcesContent":["\"use client\";\r\nimport Modal from \"@/components/modal/Modal\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport React from \"react\";\r\n\r\nconst tone = {\r\n  success: {\r\n    ring: \"ring-green-200 dark:ring-green-900/40\",\r\n    bg: \"bg-green-50 dark:bg-green-900/30\",\r\n    text: \"text-green-800 dark:text-green-100\",\r\n    title: \"สำเร็จ\",\r\n  },\r\n  error: {\r\n    ring: \"ring-red-200 dark:ring-red-900/40\",\r\n    bg: \"bg-red-50 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-100\",\r\n    title: \"เกิดข้อผิดพลาด\",\r\n  },\r\n  info: {\r\n    ring: \"ring-blue-200 dark:ring-blue-900/40\",\r\n    bg: \"bg-blue-50 dark:bg-blue-900/30\",\r\n    text: \"text-blue-800 dark:text-blue-100\",\r\n    title: \"แจ้งเตือน\",\r\n  },\r\n};\r\n\r\nfunction normalizeMessage(msg) {\r\n  // 1) ปล่อย ReactNode ผ่านไปได้เลย\r\n  if (React.isValidElement(msg)) return msg;\r\n\r\n  // 2) string → คืนตรงๆ\r\n  if (typeof msg === \"string\") return msg;\r\n\r\n  // 3) Error instance\r\n  if (msg instanceof Error) return msg.message || \"Unexpected error\";\r\n\r\n  // 4) รูปแบบที่พบบ่อยจาก backend\r\n  const fromCommonShape =\r\n    msg?.message ||\r\n    msg?.error ||\r\n    msg?.data?.message ||\r\n    msg?.data?.error;\r\n\r\n  if (typeof fromCommonShape === \"string\") return fromCommonShape;\r\n\r\n  // 5) fallback: stringify แบบสั้นๆ\r\n  try {\r\n    return JSON.stringify(msg);\r\n  } catch {\r\n    return \"Unknown error\";\r\n  }\r\n}\r\n\r\nexport default function NoticeDialog({\r\n  open,\r\n  onClose,\r\n  type = \"info\", // 'success' | 'error' | 'info'\r\n  title,\r\n  message,\r\n  footerButtons, // optional: <Button>...</Button>\r\n}) {\r\n  const t = tone[type] || tone.info;\r\n  const content = normalizeMessage(message);\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={onClose}\r\n      size=\"md\"\r\n      title={title || t.title}\r\n      footer={footerButtons ?? <Button onClick={onClose}>ปิด</Button>}\r\n    >\r\n      <div className={`rounded-md ${t.bg} ${t.ring} p-3`} role=\"status\" aria-live=\"polite\">\r\n        {/* ถ้า content เป็น ReactNode ก็ render ตรง ๆ ได้ */}\r\n        {typeof content === \"string\" ? (\r\n          <p className={`text-sm ${t.text}`}>{content}</p>\r\n        ) : (\r\n          <div className={`text-sm ${t.text}`}>{content}</div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,OAAO;IACX,SAAS;QACP,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IACA,MAAM;QACJ,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,iBAAiB,GAAG;IAC3B,kCAAkC;IAClC,kBAAI,gNAAK,CAAC,cAAc,CAAC,MAAM,OAAO;IAEtC,sBAAsB;IACtB,IAAI,OAAO,QAAQ,UAAU,OAAO;IAEpC,oBAAoB;IACpB,IAAI,eAAe,OAAO,OAAO,IAAI,OAAO,IAAI;IAEhD,gCAAgC;IAChC,MAAM,kBACJ,KAAK,WACL,KAAK,SACL,KAAK,MAAM,WACX,KAAK,MAAM;IAEb,IAAI,OAAO,oBAAoB,UAAU,OAAO;IAEhD,kCAAkC;IAClC,IAAI;QACF,OAAO,KAAK,SAAS,CAAC;IACxB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEe,SAAS,aAAa,EACnC,IAAI,EACJ,OAAO,EACP,OAAO,MAAM,EACb,KAAK,EACL,OAAO,EACP,aAAa,EACd;IACC,MAAM,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,IAAI;IACjC,MAAM,UAAU,iBAAiB;IAEjC,qBACE,8OAAC,wIAAK;QACJ,MAAM;QACN,SAAS;QACT,MAAK;QACL,OAAO,SAAS,EAAE,KAAK;QACvB,QAAQ,+BAAiB,8OAAC,qIAAM;YAAC,SAAS;sBAAS;;;;;;kBAEnD,cAAA,8OAAC;YAAI,WAAW,CAAC,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC;YAAE,MAAK;YAAS,aAAU;sBAEzE,OAAO,YAAY,yBAClB,8OAAC;gBAAE,WAAW,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE;0BAAG;;;;;qCAEpC,8OAAC;gBAAI,WAAW,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE;0BAAG;;;;;;;;;;;;;;;;AAKhD","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/input.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nfunction cx(...xs) {\r\n  return xs.filter(Boolean).join(\" \");\r\n}\r\n\r\nexport const Input = React.forwardRef(function Input(\r\n  { className = \"\", ...props },\r\n  ref\r\n) {\r\n  return (\r\n    <input\r\n      ref={ref}\r\n      className={cx(\r\n        \"flex h-10 w-full rounded-md border border-neutral-300 bg-transparent px-3 py-2 text-sm\",\r\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-900/20\",\r\n        \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n        \"dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGA,SAAS,GAAG,GAAG,EAAE;IACf,OAAO,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC;AACjC;AAEO,MAAM,sBAAQ,gNAAK,CAAC,UAAU,CAAC,SAAS,MAC7C,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,EAC5B,GAAG;IAEH,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,GACT,0FACA,qFACA,mDACA,qEACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/label.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Label({ className = \"\", ...props }) {\r\n  return (\r\n    <label\r\n      className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGO,SAAS,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IAChD,qBACE,8OAAC;QACC,WAAW,CAAC,2FAA2F,EAAE,WAAW;QACnH,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/dialog.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useEffect } from \"react\";\r\n\r\nconst DialogCtx = createContext({ onOpenChange: () => {}, open: false });\r\n\r\nexport function Dialog({ open, onOpenChange, children }) {\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const onKey = (e) => {\r\n      if (e.key === \"Escape\") onOpenChange(false);\r\n    };\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open, onOpenChange]);\r\n  return (\r\n    <DialogCtx.Provider value={{ onOpenChange, open }}>\r\n      {children}\r\n    </DialogCtx.Provider>\r\n  );\r\n}\r\n\r\nexport function DialogContent({ className = \"\", children, ...rest }) {\r\n  const { open, onOpenChange } = useContext(DialogCtx);\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50\" aria-modal=\"true\" role=\"dialog\">\r\n      <div\r\n        className=\"absolute inset-0 bg-black/50\"\r\n        onClick={() => onOpenChange(false)}\r\n      />\r\n      <div className=\"absolute inset-0 grid place-items-center p-4\">\r\n        <div\r\n          className={`w-full max-w-lg rounded-lg bg-white dark:bg-neutral-900 shadow-2xl border dark:border-neutral-800 ${className}`}\r\n          {...rest}\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport function DialogHeader({ className = \"\", ...props }) {\r\n  return <div className={`border-b px-6 py-4 ${className}`} {...props} />;\r\n}\r\nexport function DialogTitle({ className = \"\", ...props }) {\r\n  return <h2 className={`text-lg font-semibold ${className}`} {...props} />;\r\n}\r\nexport function DialogFooter({ className = \"\", ...props }) {\r\n  return (\r\n    <div\r\n      className={`border-t px-6 py-4 flex justify-end gap-2 ${className}`}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nexport function DialogClose({ asChild, children }) {\r\n  const { onOpenChange } = useContext(DialogCtx);\r\n  if (asChild && React.isValidElement(children)) {\r\n    return React.cloneElement(children, {\r\n      onClick: (e) => {\r\n        children.props?.onClick?.(e);\r\n        onOpenChange(false);\r\n      },\r\n    });\r\n  }\r\n  return (\r\n    <button\r\n      onClick={() => onOpenChange(false)}\r\n      className=\"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm\"\r\n    >\r\n      {children || \"Close\"}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA;AADA;;;AAGA,MAAM,0BAAY,IAAA,sNAAa,EAAC;IAAE,cAAc,KAAO;IAAG,MAAM;AAAM;AAE/D,SAAS,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE;IACrD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QACX,MAAM,QAAQ,CAAC;YACb,IAAI,EAAE,GAAG,KAAK,UAAU,aAAa;QACvC;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;QAAM;KAAa;IACvB,qBACE,8OAAC,UAAU,QAAQ;QAAC,OAAO;YAAE;YAAc;QAAK;kBAC7C;;;;;;AAGP;AAEO,SAAS,cAAc,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,MAAM;IACjE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,IAAA,mNAAU,EAAC;IAC1C,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,8OAAC;QAAI,WAAU;QAAqB,cAAW;QAAO,MAAK;;0BACzD,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,aAAa;;;;;;0BAE9B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,CAAC,kGAAkG,EAAE,WAAW;oBAC1H,GAAG,IAAI;8BAEP;;;;;;;;;;;;;;;;;AAKX;AACO,SAAS,aAAa,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IACvD,qBAAO,8OAAC;QAAI,WAAW,CAAC,mBAAmB,EAAE,WAAW;QAAG,GAAG,KAAK;;;;;;AACrE;AACO,SAAS,YAAY,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IACtD,qBAAO,8OAAC;QAAG,WAAW,CAAC,sBAAsB,EAAE,WAAW;QAAG,GAAG,KAAK;;;;;;AACvE;AACO,SAAS,aAAa,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IACvD,qBACE,8OAAC;QACC,WAAW,CAAC,0CAA0C,EAAE,WAAW;QAClE,GAAG,KAAK;;;;;;AAGf;AACO,SAAS,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAE;IAC/C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,mNAAU,EAAC;IACpC,IAAI,yBAAW,gNAAK,CAAC,cAAc,CAAC,WAAW;QAC7C,qBAAO,gNAAK,CAAC,YAAY,CAAC,UAAU;YAClC,SAAS,CAAC;gBACR,SAAS,KAAK,EAAE,UAAU;gBAC1B,aAAa;YACf;QACF;IACF;IACA,qBACE,8OAAC;QACC,SAAS,IAAM,aAAa;QAC5B,WAAU;kBAET,YAAY;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/api/auth.js"],"sourcesContent":["import { api, configureApi } from \"./index.js\";\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4000\";\r\nconst REFRESH_URL = `${API_BASE}/api/auth/refresh`;\r\nconst LOGIN_URL = `${API_BASE}/api/auth/login`;\r\nconst LOGOUT_URL = `${API_BASE}/api/auth/logout`;\r\n\r\nlet _accessToken = null;\r\nlet _refreshing = null; // Promise<boolean>\r\n\r\n/* ---------- Token store (in-memory + localStorage) ---------- */\r\nconst KEY = \"accessToken\";\r\n\r\nexport function setAccessToken(token) {\r\n  _accessToken = token || null;\r\n  try {\r\n    if (token) localStorage.setItem(KEY, token);\r\n    else localStorage.removeItem(KEY);\r\n  } catch {}\r\n}\r\n\r\nexport async function getAccessToken() {\r\n  if (_accessToken) return _accessToken;\r\n  try {\r\n    const t = localStorage.getItem(KEY);\r\n    if (t) _accessToken = t;\r\n  } catch {}\r\n  return _accessToken;\r\n}\r\n\r\n/* ---------- Configure api wrapper ---------- */\r\nconfigureApi({\r\n  getAccessToken,\r\n  onUnauthorized: tryRefreshOnce,\r\n});\r\n\r\n/* ---------- Refresh queue ---------- */\r\nasync function tryRefreshOnce() {\r\n  if (_refreshing) return _refreshing;\r\n\r\n  _refreshing = (async () => {\r\n    try {\r\n      const res = await fetch(REFRESH_URL, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n      });\r\n      if (!res.ok) {\r\n        setAccessToken(null);\r\n        return false;\r\n      }\r\n      const data = await res.json().catch(() => ({}));\r\n      const t = data?.accessToken || null;\r\n      setAccessToken(t);\r\n      return !!t;\r\n    } catch {\r\n      setAccessToken(null);\r\n      return false;\r\n    } finally {\r\n      _refreshing = null;\r\n    }\r\n  })();\r\n\r\n  return _refreshing;\r\n}\r\n\r\n/* ---------- Public auth actions ---------- */\r\nexport async function login(payload) {\r\n  const data = await fetch(LOGIN_URL, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"include\",\r\n    body: JSON.stringify(payload || {}),\r\n  }).then((r) => r.json());\r\n\r\n  if (data?.accessToken) setAccessToken(data.accessToken);\r\n  return data;\r\n}\r\n\r\nexport async function logout() {\r\n  try {\r\n    await fetch(LOGOUT_URL, { method: \"POST\", credentials: \"include\" });\r\n  } catch {}\r\n  setAccessToken(null);\r\n}\r\n\r\nexport const me = () => api.get(\"/api/auth/me\");\r\nexport const changePassword = (body) => api.post(\"/api/auth/change-password\", body);\r\n\r\nexport async function forgotPassword(email) {\r\n  return api.post(\"/api/auth/forgot\", { email });\r\n}\r\n\r\nexport async function resetPassword(token, newPassword) {\r\n  return api.post(\"/api/auth/reset\", { token, password: newPassword });\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,WAAW,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AACpD,MAAM,cAAc,GAAG,SAAS,iBAAiB,CAAC;AAClD,MAAM,YAAY,GAAG,SAAS,eAAe,CAAC;AAC9C,MAAM,aAAa,GAAG,SAAS,gBAAgB,CAAC;AAEhD,IAAI,eAAe;AACnB,IAAI,cAAc,MAAM,mBAAmB;AAE3C,gEAAgE,GAChE,MAAM,MAAM;AAEL,SAAS,eAAe,KAAK;IAClC,eAAe,SAAS;IACxB,IAAI;QACF,IAAI,OAAO,aAAa,OAAO,CAAC,KAAK;aAChC,aAAa,UAAU,CAAC;IAC/B,EAAE,OAAM,CAAC;AACX;AAEO,eAAe;IACpB,IAAI,cAAc,OAAO;IACzB,IAAI;QACF,MAAM,IAAI,aAAa,OAAO,CAAC;QAC/B,IAAI,GAAG,eAAe;IACxB,EAAE,OAAM,CAAC;IACT,OAAO;AACT;AAEA,+CAA+C,GAC/C,IAAA,4HAAY,EAAC;IACX;IACA,gBAAgB;AAClB;AAEA,uCAAuC,GACvC,eAAe;IACb,IAAI,aAAa,OAAO;IAExB,cAAc,CAAC;QACb,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,aAAa;gBACnC,QAAQ;gBACR,aAAa;YACf;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,eAAe;gBACf,OAAO;YACT;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC7C,MAAM,IAAI,MAAM,eAAe;YAC/B,eAAe;YACf,OAAO,CAAC,CAAC;QACX,EAAE,OAAM;YACN,eAAe;YACf,OAAO;QACT,SAAU;YACR,cAAc;QAChB;IACF,CAAC;IAED,OAAO;AACT;AAGO,eAAe,MAAM,OAAO;IACjC,MAAM,OAAO,MAAM,MAAM,WAAW;QAClC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC,WAAW,CAAC;IACnC,GAAG,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI;IAErB,IAAI,MAAM,aAAa,eAAe,KAAK,WAAW;IACtD,OAAO;AACT;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,YAAY;YAAE,QAAQ;YAAQ,aAAa;QAAU;IACnE,EAAE,OAAM,CAAC;IACT,eAAe;AACjB;AAEO,MAAM,KAAK,IAAM,mHAAG,CAAC,GAAG,CAAC;AACzB,MAAM,iBAAiB,CAAC,OAAS,mHAAG,CAAC,IAAI,CAAC,6BAA6B;AAEvE,eAAe,eAAe,KAAK;IACxC,OAAO,mHAAG,CAAC,IAAI,CAAC,oBAAoB;QAAE;IAAM;AAC9C;AAEO,eAAe,cAAc,KAAK,EAAE,WAAW;IACpD,OAAO,mHAAG,CAAC,IAAI,CAAC,mBAAmB;QAAE;QAAO,UAAU;IAAY;AACpE","debugId":null}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/auth/dialogs/ChangePasswordDialog.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { changePassword } from \"@/api/auth\";\r\n\r\nexport default function ChangePasswordDialog({ open, onOpenChange }) {\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [busy, setBusy] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function resetAll() {\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirm(\"\");\r\n    setError(\"\");\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e?.preventDefault();\r\n    setError(\"\");\r\n    if (!currentPassword || !newPassword) return setError(\"กรอกข้อมูลให้ครบ\");\r\n    if (newPassword.length < 8) return setError(\"รหัสผ่านใหม่อย่างน้อย 8 ตัว\");\r\n    if (newPassword !== confirm) return setError(\"รหัสผ่านใหม่ไม่ตรงกัน\");\r\n\r\n    setBusy(true);\r\n    try {\r\n      await changePassword({ currentPassword, newPassword });\r\n      resetAll();\r\n      onOpenChange?.(false);\r\n    } catch (e) {\r\n      setError(e?.data?.message || e?.message || \"เปลี่ยนรหัสผ่านไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onOpenChange={(v) => {\r\n        if (!v) resetAll();\r\n        onOpenChange?.(v);\r\n      }}\r\n    >\r\n      <DialogContent className=\"sm:max-w-[480px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>เปลี่ยนรหัสผ่าน</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form id=\"change-pass-form\" onSubmit={onSubmit} className=\"space-y-4\">\r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"cur-pass\">รหัสผ่านปัจจุบัน</Label>\r\n            <Input\r\n              id=\"cur-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"current-password\"\r\n              value={currentPassword}\r\n              onChange={(e) => setCurrentPassword(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"new-pass\">รหัสผ่านใหม่ (≥ 8)</Label>\r\n            <Input\r\n              id=\"new-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"new-password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"confirm-pass\">ยืนยันรหัสผ่านใหม่</Label>\r\n            <Input\r\n              id=\"confirm-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"new-password\"\r\n              value={confirm}\r\n              onChange={(e) => setConfirm(e.target.value)}\r\n            />\r\n          </div>\r\n        </form>\r\n\r\n        <DialogFooter className=\"gap-2\">\r\n          <DialogClose asChild>\r\n            <Button variant=\"outline\" disabled={busy}>\r\n              ยกเลิก\r\n            </Button>\r\n          </DialogClose>\r\n          <Button form=\"change-pass-form\" disabled={busy}>\r\n            {busy ? \"กำลังบันทึก...\" : \"บันทึก\"}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AAQA;AAbA;;;;;;;;AAee,SAAS,qBAAqB,EAAE,IAAI,EAAE,YAAY,EAAE;IACjE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,SAAS;QACP,mBAAmB;QACnB,eAAe;QACf,WAAW;QACX,SAAS;IACX;IAEA,eAAe,SAAS,CAAC;QACvB,GAAG;QACH,SAAS;QACT,IAAI,CAAC,mBAAmB,CAAC,aAAa,OAAO,SAAS;QACtD,IAAI,YAAY,MAAM,GAAG,GAAG,OAAO,SAAS;QAC5C,IAAI,gBAAgB,SAAS,OAAO,SAAS;QAE7C,QAAQ;QACR,IAAI;YACF,MAAM,IAAA,6HAAc,EAAC;gBAAE;gBAAiB;YAAY;YACpD;YACA,eAAe;QACjB,EAAE,OAAO,GAAG;YACV,SAAS,GAAG,MAAM,WAAW,GAAG,WAAW;QAC7C,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,8OAAC,qIAAM;QACL,MAAM;QACN,cAAc,CAAC;YACb,IAAI,CAAC,GAAG;YACR,eAAe;QACjB;kBAEA,cAAA,8OAAC,4IAAa;YAAC,WAAU;;8BACvB,8OAAC,2IAAY;8BACX,cAAA,8OAAC,0IAAW;kCAAC;;;;;;;;;;;8BAGf,8OAAC;oBAAK,IAAG;oBAAmB,UAAU;oBAAU,WAAU;;wBACvD,uBAAS,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAE/C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,mIAAK;oCAAC,SAAQ;8CAAW;;;;;;8CAC1B,8OAAC,mIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAItD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,mIAAK;oCAAC,SAAQ;8CAAW;;;;;;8CAC1B,8OAAC,mIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAIlD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,mIAAK;oCAAC,SAAQ;8CAAe;;;;;;8CAC9B,8OAAC,mIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;8BAKhD,8OAAC,2IAAY;oBAAC,WAAU;;sCACtB,8OAAC,0IAAW;4BAAC,OAAO;sCAClB,cAAA,8OAAC,qIAAM;gCAAC,SAAQ;gCAAU,UAAU;0CAAM;;;;;;;;;;;sCAI5C,8OAAC,qIAAM;4BAAC,MAAK;4BAAmB,UAAU;sCACvC,OAAO,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;AAMvC","debugId":null}},
    {"offset": {"line": 712, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/SignaturePad.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * SignaturePad: ลายเซ็นสดบน <canvas> (รองรับ mouse + touch + high-DPI)\r\n * props:\r\n * - height: ความสูง canvas (px)\r\n * - penSize: ความหนาปากกา (px)\r\n * - penColor: สีเส้น\r\n * - bgColor: พื้นหลัง (null = โปร่งใส)\r\n * - onSave(blob) => callback เมื่อกด \"บันทึก\"\r\n */\r\nexport default function SignaturePad({\r\n  height = 160,\r\n  penSize = 2,\r\n  penColor = \"#000000\",\r\n  bgColor = null,\r\n  onSave,\r\n}) {\r\n  const wrapRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const ctxRef = useRef(null);\r\n  const drawing = useRef(false);\r\n  const lastPt = useRef({ x: 0, y: 0 });\r\n  const [paths, setPaths] = useState([]); // เก็บเส้นสำหรับ Undo\r\n  const [currentPath, setCurrentPath] = useState([]);\r\n\r\n  // resize ให้พอดีกับความกว้าง container + รองรับ DPR\r\n  function resizeCanvas() {\r\n    const canvas = canvasRef.current;\r\n    const wrap = wrapRef.current;\r\n    if (!canvas || !wrap) return;\r\n\r\n    const dpi = window.devicePixelRatio || 1;\r\n    const cssWidth = wrap.clientWidth;\r\n    const cssHeight = height;\r\n\r\n    canvas.width = Math.max(1, Math.floor(cssWidth * dpi));\r\n    canvas.height = Math.max(1, Math.floor(cssHeight * dpi));\r\n    canvas.style.width = cssWidth + \"px\";\r\n    canvas.style.height = cssHeight + \"px\";\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.setTransform(dpi, 0, 0, dpi, 0, 0); // scale หนึ่งครั้ง ตาม DPR\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = \"round\";\r\n    ctx.strokeStyle = penColor;\r\n    ctx.lineWidth = penSize;\r\n    ctxRef.current = ctx;\r\n\r\n    redrawAll();\r\n  }\r\n\r\n  useEffect(() => {\r\n    resizeCanvas();\r\n    const onR = () => resizeCanvas();\r\n    window.addEventListener(\"resize\", onR);\r\n    return () => window.removeEventListener(\"resize\", onR);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [height]);\r\n\r\n  useEffect(() => {\r\n    // เปลี่ยนสี/ขนาดปากกาแบบ live\r\n    const ctx = ctxRef.current;\r\n    if (ctx) {\r\n      ctx.strokeStyle = penColor;\r\n      ctx.lineWidth = penSize;\r\n    }\r\n  }, [penColor, penSize]);\r\n\r\n  function getXY(e) {\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    if (e.touches && e.touches[0]) {\r\n      const t = e.touches[0];\r\n      return { x: t.clientX - rect.left, y: t.clientY - rect.top };\r\n    }\r\n    return { x: e.clientX - rect.left, y: e.clientY - rect.top };\r\n  }\r\n\r\n  function drawLine(from, to) {\r\n    const ctx = ctxRef.current;\r\n    ctx.beginPath();\r\n    ctx.moveTo(from.x, from.y);\r\n    ctx.lineTo(to.x, to.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  function handleDown(e) {\r\n    e.preventDefault();\r\n    drawing.current = true;\r\n    const p = getXY(e);\r\n    lastPt.current = p;\r\n    setCurrentPath([{ x: p.x, y: p.y }]);\r\n  }\r\n  function handleMove(e) {\r\n    if (!drawing.current) return;\r\n    e.preventDefault();\r\n    const p = getXY(e);\r\n    drawLine(lastPt.current, p);\r\n    lastPt.current = p;\r\n    setCurrentPath((prev) => [...prev, { x: p.x, y: p.y }]);\r\n  }\r\n  function handleUp(e) {\r\n    if (!drawing.current) return;\r\n    e.preventDefault();\r\n    drawing.current = false;\r\n    setPaths((prev) => (currentPath.length ? [...prev, currentPath] : prev));\r\n    setCurrentPath([]);\r\n  }\r\n\r\n  function clearAll() {\r\n    setPaths([]);\r\n    setCurrentPath([]);\r\n    const ctx = ctxRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!ctx || !canvas) return;\r\n    if (bgColor) {\r\n      ctx.save();\r\n      ctx.fillStyle = bgColor;\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      ctx.restore();\r\n    } else {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  }\r\n\r\n  function undoLast() {\r\n    if (!paths.length) return;\r\n    const copy = paths.slice(0, -1);\r\n    setPaths(copy);\r\n    setCurrentPath([]);\r\n    redrawAll(copy);\r\n  }\r\n\r\n  function redrawAll(_paths = paths) {\r\n    const ctx = ctxRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!ctx || !canvas) return;\r\n\r\n    if (bgColor) {\r\n      ctx.save();\r\n      ctx.fillStyle = bgColor;\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      ctx.restore();\r\n    } else {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    ctx.save();\r\n    ctx.strokeStyle = penColor;\r\n    ctx.lineWidth = penSize;\r\n    for (const path of _paths) {\r\n      for (let i = 1; i < path.length; i++) {\r\n        const a = path[i - 1];\r\n        const b = path[i];\r\n        ctx.beginPath();\r\n        ctx.moveTo(a.x, a.y);\r\n        ctx.lineTo(b.x, b.y);\r\n        ctx.stroke();\r\n      }\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  async function handleSave() {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    // สร้าง PNG โปร่งใส (หรือมี bg ตามที่กำหนด)\r\n    canvas.toBlob((blob) => {\r\n      if (blob && onSave) onSave(blob);\r\n    }, \"image/png\", 1);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div ref={wrapRef} className=\"w-full\">\r\n        <canvas\r\n          ref={canvasRef}\r\n          className=\"w-full rounded-md border bg-white touch-none select-none\"\r\n          style={{ display: \"block\", height }}\r\n          onMouseDown={handleDown}\r\n          onMouseMove={handleMove}\r\n          onMouseUp={handleUp}\r\n          onMouseLeave={handleUp}\r\n          onTouchStart={handleDown}\r\n          onTouchMove={handleMove}\r\n          onTouchEnd={handleUp}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-2\">\r\n        <button type=\"button\" className=\"px-3 py-1.5 rounded-md border\" onClick={clearAll}>\r\n          ล้าง\r\n        </button>\r\n        <button type=\"button\" className=\"px-3 py-1.5 rounded-md border\" onClick={undoLast}>\r\n          ย้อนกลับ\r\n        </button>\r\n\r\n        <div className=\"ml-auto flex items-center gap-2 text-sm\">\r\n          <label className=\"inline-flex items-center gap-1\">\r\n            ขนาดเส้น\r\n            <input\r\n              type=\"range\"\r\n              min={1}\r\n              max={6}\r\n              defaultValue={penSize}\r\n              onChange={(e) => {\r\n                const ctx = ctxRef.current;\r\n                if (ctx) ctx.lineWidth = Number(e.target.value) || 2;\r\n              }}\r\n            />\r\n          </label>\r\n          <label className=\"inline-flex items-center gap-1\">\r\n            สี\r\n            <input\r\n              type=\"color\"\r\n              defaultValue={penColor}\r\n              onChange={(e) => {\r\n                const ctx = ctxRef.current;\r\n                if (ctx) ctx.strokeStyle = e.target.value;\r\n              }}\r\n            />\r\n          </label>\r\n          <button type=\"button\" className=\"px-3 py-1.5 rounded-md border bg-black text-white\" onClick={handleSave}>\r\n            บันทึกลายเซ็น\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/account/MeClient.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { apiFetch, toApiUrl } from \"@/api\";\r\nimport StatefulButton from \"@/components/ui/stateful-button\";\r\nimport { BackgroundGradient } from \"@/components/ui/background-gradient\";\r\nimport NoticeDialog from \"@/components/modal/NoticeDialog\";\r\nimport ChangePasswordDialog from \"@/components/auth/dialogs/ChangePasswordDialog\";\r\nimport SignaturePad from \"@/components/SignaturePad\";\r\n\r\nconst EMPLOYEE_TYPES = {\r\n  DAILY: \"DAILY (รายวัน)\",\r\n  MONTHLY: \"MONTHLY (รายเดือน)\",\r\n};\r\nconst CONTRACT_TYPES = {\r\n  PERMANENT: \"PERMANENT (ประจำ)\",\r\n  TEMPORARY: \"TEMPORARY (ชั่วคราว)\",\r\n  PROBATION: \"PROBATION (ทดลองงาน)\",\r\n};\r\nconst GENDERS = { MALE: \"ชาย\", FEMALE: \"หญิง\", OTHER: \"อื่น ๆ\" };\r\n\r\nfunction fmtDate(d) {\r\n  if (!d) return \"\";\r\n  try {\r\n    const dt = typeof d === \"string\" ? new Date(d) : d;\r\n    if (Number.isNaN(dt.getTime())) return \"\";\r\n    return dt.toISOString().slice(0, 10);\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default function MeClient() {\r\n  const router = useRouter();\r\n  const { user, loading, reload } = useAuth();\r\n\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    name: \"\",\r\n    firstNameTh: \"\",\r\n    lastNameTh: \"\",\r\n    firstNameEn: \"\",\r\n    lastNameEn: \"\",\r\n  });\r\n\r\n  const [readonly, setReadonly] = useState({\r\n    organizationName: \"\",\r\n    employeeCode: \"\",\r\n    employeeType: \"\",\r\n    contractType: \"\",\r\n    gender: \"\",\r\n    birthDate: \"\",\r\n    startDate: \"\",\r\n    probationEndDate: \"\",\r\n    resignedAt: \"\",\r\n    roleName: \"\",\r\n    primaryDept: null,\r\n    otherDepts: [],\r\n  });\r\n\r\n  const [busy, setBusy] = useState(false);\r\n  const [notice, setNotice] = useState({\r\n    open: false,\r\n    type: \"info\",\r\n    message: \"\",\r\n  });\r\n  const [showChangePass, setShowChangePass] = useState(false);\r\n\r\n  // ✅ ใช้ toApiUrl + cache bust\r\n  const [avatarTick, setAvatarTick] = useState(0);\r\n  const [avatarError, setAvatarError] = useState(false);\r\n  const avatarUrl = useMemo(() => {\r\n    if (!user?.id) return \"\";\r\n    const abs = toApiUrl(`/api/files/avatar/${user.id}`);\r\n    const sep = abs.includes(\"?\") ? \"&\" : \"?\";\r\n    return `${abs}${sep}ts=${avatarTick}`;\r\n  }, [user?.id, avatarTick]);\r\n\r\n  const [signTick, setSignTick] = useState(0);\r\n  const [signError, setSignError] = useState(false);\r\n  const signatureUrl = useMemo(() => {\r\n    if (!user?.id) return \"\";\r\n    const abs = toApiUrl(`/api/files/signature/${user.id}`);\r\n    const sep = abs.includes(\"?\") ? \"&\" : \"?\";\r\n    return `${abs}${sep}ts=${signTick}`;\r\n  }, [user?.id, signTick]);\r\n\r\n  const [showDrawPad, setShowDrawPad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!loading && !user) router.replace(\"/auth/login?callbackUrl=/me\");\r\n  }, [loading, user, router]);\r\n\r\n  useEffect(() => {\r\n    let stop = false;\r\n    (async () => {\r\n      if (!user?.id) return;\r\n      try {\r\n        const res = await apiFetch(`/api/users/${user.id}`);\r\n        const u = res?.data || {};\r\n        if (stop) return;\r\n\r\n        setForm({\r\n          email: u.email || \"\",\r\n          name: u.name || \"\",\r\n          firstNameTh: u.firstNameTh || \"\",\r\n          lastNameTh: u.lastNameTh || \"\",\r\n          firstNameEn: u.firstNameEn || \"\",\r\n          lastNameEn: u.lastNameEn || \"\",\r\n        });\r\n\r\n        const primary = u.primaryUserDept?.department\r\n          ? {\r\n              code: u.primaryUserDept.department.code,\r\n              nameTh: u.primaryUserDept.department.nameTh,\r\n              positionLevel: u.primaryUserDept.positionLevel || \"\",\r\n              positionName: u.primaryUserDept.positionName || \"\",\r\n            }\r\n          : null;\r\n\r\n        const others = (u.userDepartments || [])\r\n          .filter((d) => !d.endedAt && d.id !== u.primaryUserDept?.id)\r\n          .map((d) => ({\r\n            id: d.id,\r\n            code: d.department?.code,\r\n            nameTh: d.department?.nameTh,\r\n            positionLevel: d.positionLevel || \"\",\r\n            positionName: d.positionName || \"\",\r\n          }));\r\n\r\n        setReadonly({\r\n          organizationName:\r\n            u.organization?.nameTh || u.organization?.nameEn || \"\",\r\n          employeeCode: u.employeeCode || \"\",\r\n          employeeType: EMPLOYEE_TYPES[u.employeeType] || \"\",\r\n          contractType: CONTRACT_TYPES[u.contractType] || \"\",\r\n          gender: GENDERS[u.gender] || \"\",\r\n          birthDate: fmtDate(u.birthDate),\r\n          startDate: fmtDate(u.startDate),\r\n          probationEndDate: fmtDate(u.probationEndDate),\r\n          resignedAt: fmtDate(u.resignedAt),\r\n          roleName: u.role?.name || \"\",\r\n          primaryDept: primary,\r\n          otherDepts: others,\r\n        });\r\n\r\n        setAvatarError(false);\r\n        setSignError(false);\r\n        const now = Date.now();\r\n        setAvatarTick(now);\r\n        setSignTick(now);\r\n      } catch (e) {\r\n        if (!stop)\r\n          setNotice({\r\n            open: true,\r\n            type: \"error\",\r\n            message: e?.message || \"โหลดโปรไฟล์ล้มเหลว\",\r\n          });\r\n      }\r\n    })();\r\n    return () => {\r\n      stop = true;\r\n    };\r\n  }, [user?.id]);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setBusy(true);\r\n    try {\r\n      await apiFetch(\"/api/users/me\", {\r\n        method: \"PATCH\",\r\n        body: {\r\n          name: form.name,\r\n          firstNameTh: form.firstNameTh,\r\n          lastNameTh: form.lastNameTh,\r\n          firstNameEn: form.firstNameEn,\r\n          lastNameEn: form.lastNameEn,\r\n        },\r\n      });\r\n      reload?.();\r\n      setNotice({\r\n        open: true,\r\n        type: \"success\",\r\n        message: \"บันทึกโปรไฟล์เรียบร้อย\",\r\n      });\r\n    } catch (e) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message: e?.data?.error || e?.message || \"บันทึกไม่สำเร็จ\",\r\n      });\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function uploadFile({\r\n    file,\r\n    field,\r\n    url,\r\n    tickSetter,\r\n    errSetter,\r\n    okMessage,\r\n  }) {\r\n    if (!file) return;\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message: \"กรุณาเลือกรูปภาพเท่านั้น\",\r\n      });\r\n      return;\r\n    }\r\n    const limit = field === \"avatar\" ? 2 * 1024 * 1024 : 1 * 1024 * 1024;\r\n    if (file.size > limit) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message:\r\n          field === \"avatar\"\r\n            ? \"ขนาดรูปโปรไฟล์ต้องไม่เกิน 2MB\"\r\n            : \"ขนาดไฟล์ลายเซ็นต้องไม่เกิน 1MB\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(field, file);\r\n      await apiFetch(url, { method: \"POST\", body: fd });\r\n      errSetter(false);\r\n      tickSetter(Date.now());\r\n      reload?.();\r\n      setNotice({ open: true, type: \"success\", message: okMessage });\r\n    } catch (e) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message:\r\n          e?.data?.message ||\r\n          e?.data?.error ||\r\n          e?.message ||\r\n          \"อัปโหลดไม่สำเร็จ\",\r\n      });\r\n    }\r\n  }\r\n\r\n  async function onUploadAvatar(file) {\r\n    await uploadFile({\r\n      file,\r\n      field: \"avatar\",\r\n      url: \"/api/files/avatar\",\r\n      tickSetter: setAvatarTick,\r\n      errSetter: setAvatarError,\r\n      okMessage: \"อัปโหลดรูปโปรไฟล์สำเร็จ\",\r\n    });\r\n  }\r\n\r\n  async function onUploadSignature(file) {\r\n    await uploadFile({\r\n      file,\r\n      field: \"signature\",\r\n      url: \"/api/files/signature\",\r\n      tickSetter: setSignTick,\r\n      errSetter: setSignError,\r\n      okMessage: \"อัปโหลดลายเซ็นสำเร็จ\",\r\n    });\r\n  }\r\n\r\n  const hasPrimary = useMemo(\r\n    () => !!readonly.primaryDept,\r\n    [readonly.primaryDept]\r\n  );\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-5xl p-6 py-30 space-y-8\">\r\n      <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n        <h2 className=\"text-xl font-semibold text-neutral-900 dark:text-neutral-100\">\r\n          โปรไฟล์ของฉัน\r\n        </h2>\r\n        <p className=\"mt-1 text-sm text-neutral-600 dark:text-neutral-400\">\r\n          แก้ไขชื่อที่แสดง อัปโหลดรูปโปรไฟล์/ลายเซ็น และดูข้อมูลบัญชีของคุณ\r\n        </p>\r\n\r\n        {/* Avatar & Signature */}\r\n        <div className=\"mt-6 grid gap-6 sm:grid-cols-2\">\r\n          {/* Avatar */}\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"grid h-16 w-16 place-items-center overflow-hidden rounded-full ring-1 ring-black/10 dark:ring-white/10 bg-neutral-200 dark:bg-neutral-800\">\r\n              {avatarUrl && !avatarError ? (\r\n                <img\r\n                  key={avatarUrl}\r\n                  src={avatarUrl}\r\n                  alt=\"avatar\"\r\n                  className=\"h-full w-full object-cover\"\r\n                  onLoad={() => setAvatarError(false)}\r\n                  onError={() => setAvatarError(true)}\r\n                  referrerPolicy=\"no-referrer\"\r\n                />\r\n              ) : (\r\n                <svg\r\n                  viewBox=\"0 0 24 24\"\r\n                  className=\"h-8 w-8 opacity-80\"\r\n                  aria-hidden=\"true\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z\"\r\n                  />\r\n                </svg>\r\n              )}\r\n            </div>\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"inline-flex cursor-pointer items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  className=\"hidden\"\r\n                  onChange={(e) => onUploadAvatar(e.target.files?.[0])}\r\n                />\r\n                <span className=\"rounded-md border px-3 py-1.5 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\">\r\n                  เลือกรูปโปรไฟล์…\r\n                </span>\r\n              </label>\r\n              <span className=\"text-xs text-neutral-500\">\r\n                PNG/JPG/WEBP ≤ 2MB\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <SignatureSection\r\n            signatureUrl={signatureUrl}\r\n            signError={signError}\r\n            setSignError={setSignError}\r\n            onUploadSignature={onUploadSignature}\r\n            showDrawPad={showDrawPad}\r\n            setShowDrawPad={setShowDrawPad}\r\n            setSignTick={setSignTick}\r\n            setNotice={setNotice}\r\n            reload={reload}\r\n          />\r\n        </div>\r\n\r\n        {/* Profile form (Editable) */}\r\n        <form className=\"mt-6 space-y-4\" onSubmit={onSubmit}>\r\n          <div className=\"space-y-1\">\r\n            <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n              องค์กร (Organization)\r\n            </label>\r\n            <input\r\n              value={readonly.organizationName || \"-\"}\r\n              disabled\r\n              className=\"w-full rounded-md border border-neutral-200 bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-300\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n              อีเมล (แก้ไขโดยผู้ดูแล)\r\n            </label>\r\n            <input\r\n              value={form.email}\r\n              disabled\r\n              className=\"w-full rounded-md border border-neutral-300 bg-neutral-100 px-3 py-2 text-sm opacity-90 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-400\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <label\r\n              htmlFor=\"name\"\r\n              className=\"text-sm text-neutral-700 dark:text-neutral-300\"\r\n            >\r\n              ชื่อที่แสดง (ชื่อเล่น)\r\n            </label>\r\n            <input\r\n              id=\"name\"\r\n              value={form.name}\r\n              onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n              className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              placeholder=\"เช่น โอ๋, Beam, ฯลฯ\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                ชื่อ (ไทย)\r\n              </label>\r\n              <input\r\n                value={form.firstNameTh}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, firstNameTh: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                นามสกุล (ไทย)\r\n              </label>\r\n              <input\r\n                value={form.lastNameTh}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, lastNameTh: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                ชื่อ (อังกฤษ)\r\n              </label>\r\n              <input\r\n                value={form.firstNameEn}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, firstNameEn: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                นามสกุล (อังกฤษ)\r\n              </label>\r\n              <input\r\n                value={form.lastNameEn}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, lastNameEn: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowChangePass(true)}\r\n              className=\"text-sm underline\"\r\n            >\r\n              เปลี่ยนรหัสผ่าน\r\n            </button>\r\n            <StatefulButton\r\n              type=\"submit\"\r\n              loading={busy}\r\n              loadingText=\"กำลังบันทึก...\"\r\n              className=\"h-10 rounded-md bg-black px-4 text-white dark:bg-white dark:text-black\"\r\n            >\r\n              บันทึกการเปลี่ยนแปลง\r\n            </StatefulButton>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Readonly blocks */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n            <h3 className=\"text-base font-semibold mb-4\">\r\n              ข้อมูลพนักงาน (อ่านอย่างเดียว)\r\n            </h3>\r\n\r\n            <ReadonlyRow label=\"Employee Code\" value={readonly.employeeCode} />\r\n            <ReadonlyRow label=\"Employee Type\" value={readonly.employeeType} />\r\n            <ReadonlyRow label=\"Contract Type\" value={readonly.contractType} />\r\n            <ReadonlyRow label=\"Gender\" value={readonly.gender} />\r\n\r\n            <div className=\"grid gap-4 sm:grid-cols-2 mt-2\">\r\n              <ReadonlyRow label=\"Birth Date\" value={readonly.birthDate} />\r\n              <ReadonlyRow label=\"Start Date\" value={readonly.startDate} />\r\n              <ReadonlyRow\r\n                label=\"Probation End\"\r\n                value={readonly.probationEndDate}\r\n              />\r\n              <ReadonlyRow label=\"Resigned At\" value={readonly.resignedAt} />\r\n            </div>\r\n          </BackgroundGradient>\r\n\r\n          <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n            <h3 className=\"text-base font-semibold mb-4\">\r\n              สิทธิ์และสังกัด (อ่านอย่างเดียว)\r\n            </h3>\r\n\r\n            <ReadonlyRow label=\"Role\" value={readonly.roleName} />\r\n\r\n            <div className=\"mt-3\">\r\n              <div className=\"text-xs text-neutral-500 mb-1\">\r\n                Primary Department\r\n              </div>\r\n              {hasPrimary ? (\r\n                <div className=\"rounded-md border px-3 py-2 text-sm\">\r\n                  <div className=\"font-medium\">\r\n                    {readonly.primaryDept.code} · {readonly.primaryDept.nameTh}\r\n                  </div>\r\n                  <div className=\"text-xs text-neutral-600\">\r\n                    {readonly.primaryDept.positionLevel}\r\n                    {readonly.primaryDept.positionName\r\n                      ? ` (${readonly.primaryDept.positionName})`\r\n                      : \"\"}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-neutral-500\">-</div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mt-3\">\r\n              <div className=\"text-xs text-neutral-500 mb-1\">\r\n                Other Active Departments\r\n              </div>\r\n              {readonly.otherDepts?.length ? (\r\n                <div className=\"space-y-2\">\r\n                  {readonly.otherDepts.map((d) => (\r\n                    <div\r\n                      key={d.id}\r\n                      className=\"rounded-md border px-3 py-2 text-sm\"\r\n                    >\r\n                      <div className=\"font-medium\">\r\n                        {d.code} · {d.nameTh}\r\n                      </div>\r\n                      <div className=\"text-xs text-neutral-600\">\r\n                        {d.positionLevel}\r\n                        {d.positionName ? ` (${d.positionName})` : \"\"}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-neutral-500\">-</div>\r\n              )}\r\n            </div>\r\n          </BackgroundGradient>\r\n        </div>\r\n\r\n        <NoticeDialog\r\n          open={notice.open}\r\n          onClose={() => setNotice((s) => ({ ...s, open: false }))}\r\n          type={notice.type}\r\n          message={notice.message}\r\n        />\r\n        <ChangePasswordDialog\r\n          open={showChangePass}\r\n          onClose={() => setShowChangePass(false)}\r\n        />\r\n      </BackgroundGradient>\r\n    </main>\r\n  );\r\n}\r\n\r\n/** ---------------- Signature Section ---------------- */\r\nfunction SignatureSection({\r\n  signatureUrl,\r\n  signError,\r\n  setSignError,\r\n  onUploadSignature,\r\n  showDrawPad,\r\n  setShowDrawPad,\r\n  setSignTick,\r\n  setNotice,\r\n  reload,\r\n}) {\r\n  // แก้ string ให้ Tailwind อ่านได้ (_25% แทน 25% ติดกัน)\r\n  const previewClass =\r\n    \"grid place-items-center overflow-hidden rounded-md ring-1 ring-black/10 dark:ring-white/10 bg-[length:16px_16px] bg-[linear-gradient(45deg,rgba(0,0,0,.05)_25%,transparent_25%),linear-gradient(-45deg,rgba(0,0,0,.05)_25%,transparent_25%),linear-gradient(45deg,transparent_75%,rgba(0,0,0,.05)_75%),linear-gradient(-45deg,transparent_75%,rgba(0,0,0,.05)_75%)]\";\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3\">\r\n      {/* Preview */}\r\n      <div className={previewClass} style={{ width: 280, height: 90 }}>\r\n        {signatureUrl && !signError ? (\r\n          <img\r\n            key={signatureUrl}\r\n            src={signatureUrl}\r\n            alt=\"signature\"\r\n            className=\"h-full w-full object-contain\"\r\n            onLoad={() => setSignError(false)}\r\n            onError={() => setSignError(true)}\r\n            referrerPolicy=\"no-referrer\"\r\n          />\r\n        ) : (\r\n          <div className=\"px-2 text-xs text-neutral-500\">ยังไม่มีลายเซ็น</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <label className=\"inline-flex cursor-pointer items-center gap-2 text-sm\">\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"hidden\"\r\n            onChange={(e) => onUploadSignature(e.target.files?.[0])}\r\n          />\r\n          <span className=\"rounded-md border px-3 py-1.5 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\">\r\n            อัปโหลดจากไฟล์…\r\n          </span>\r\n        </label>\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setShowDrawPad((v) => !v)}\r\n          className=\"rounded-md border px-3 py-1.5 text-sm hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\"\r\n          aria-expanded={showDrawPad}\r\n          aria-controls=\"signature-drawpad\"\r\n        >\r\n          {showDrawPad ? \"ซ่อนพื้นที่วาด\" : \"วาดลายเซ็น\"}\r\n        </button>\r\n        <span className=\"text-xs text-neutral-500 ml-1\">\r\n          แนะนำ PNG พื้นโปร่งใส ≤ 1MB\r\n        </span>\r\n      </div>\r\n\r\n      {/* Draw pad */}\r\n      {showDrawPad && (\r\n        <div\r\n          id=\"signature-drawpad\"\r\n          className=\"mt-1 rounded-lg border p-3 dark:border-neutral-800\"\r\n        >\r\n          <div className=\"mb-2 text-xs text-neutral-500\">\r\n            วาดด้วยเมาส์/ปากกา จากนั้นกดปุ่ม “บันทึก”\r\n          </div>\r\n          <SignaturePad\r\n            height={170}\r\n            penSize={2}\r\n            penColor=\"#111111\"\r\n            bgColor={null}\r\n            onSave={async (blob) => {\r\n              try {\r\n                if (!blob) return;\r\n                if (blob.size > 1 * 1024 * 1024) {\r\n                  setNotice({\r\n                    open: true,\r\n                    type: \"error\",\r\n                    message: \"ไฟล์ลายเซ็นที่บันทึกเกิน 1MB\",\r\n                  });\r\n                  return;\r\n                }\r\n                const fd = new FormData();\r\n                fd.append(\"signature\", blob, \"signature.png\");\r\n                await apiFetch(\"/api/files/signature\", {\r\n                  method: \"POST\",\r\n                  body: fd,\r\n                });\r\n                setSignError(false);\r\n                setSignTick(Date.now());\r\n                reload?.();\r\n                setNotice({\r\n                  open: true,\r\n                  type: \"success\",\r\n                  message: \"บันทึกลายเซ็นสำเร็จ\",\r\n                });\r\n              } catch (e) {\r\n                setNotice({\r\n                  open: true,\r\n                  type: \"error\",\r\n                  message:\r\n                    e?.data?.error || e?.message || \"บันทึกลายเซ็นไม่สำเร็จ\",\r\n                });\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/** ---------------- Readonly row ---------------- */\r\nfunction ReadonlyRow({ label, value }) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"text-xs text-neutral-500\">{label}</div>\r\n      <input\r\n        value={value || \"\"}\r\n        disabled\r\n        className=\"w-full rounded-md border border-neutral-200 bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-300\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}