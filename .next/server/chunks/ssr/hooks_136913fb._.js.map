{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useDebounceValue.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nexport function useDebounceValue(value, delay = 300) {\r\n  const [v, setV] = useState(value);\r\n  useEffect(() => {\r\n    const id = setTimeout(() => setV(value), delay);\r\n    return () => clearTimeout(id);\r\n  }, [value, delay]);\r\n  return v;\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AADA;;AAEO,SAAS,iBAAiB,KAAK,EAAE,QAAQ,GAAG;IACjD,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,iNAAQ,EAAC;IAC3B,IAAA,kNAAS,EAAC;QACR,MAAM,KAAK,WAAW,IAAM,KAAK,QAAQ;QACzC,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAO;KAAM;IACjB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useDepartments.js"],"sourcesContent":["\"use client\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { apiFetch } from \"@/lib/api\";\r\nimport { useDebounceValue } from \"@/hooks/useDebounceValue\";\r\n\r\nexport function useDepartments() {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [q, setQ] = useState(\"\");\r\n  const qDebounced = useDebounceValue(q, 250);\r\n\r\n  const fetchList = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await apiFetch(\r\n        `/api/departments?q=${encodeURIComponent(\r\n          qDebounced\r\n        )}&page=1&limit=200&sortBy=id&sort=asc`\r\n      );\r\n      setItems(res?.data || []);\r\n      setError(\"\");\r\n    } catch (e) {\r\n      setError(e?.data?.error || e?.message || \"โหลดไม่สำเร็จ\");\r\n      setItems([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [qDebounced]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const reload = fetchList;\r\n\r\n  const upsert = useCallback(\r\n    async (payload) => {\r\n      await apiFetch(`/api/departments`, {\r\n        method: \"POST\",\r\n        body: { id: payload.id ?? null, ...payload },\r\n      });\r\n      await reload();\r\n    },\r\n    [reload]\r\n  );\r\n\r\n  const remove = useCallback(\r\n    async (id) => {\r\n      if (!confirm(\"ลบรายการนี้?\")) return;\r\n      await apiFetch(`/api/departments/${id}`, { method: \"DELETE\" });\r\n      await reload();\r\n    },\r\n    [reload]\r\n  );\r\n\r\n  return { items, loading, error, q, setQ, reload, upsert, remove };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;AAKO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,iNAAQ,EAAC;IAC3B,MAAM,aAAa,IAAA,6IAAgB,EAAC,GAAG;IAEvC,MAAM,YAAY,IAAA,oNAAW,EAAC;QAC5B,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,sHAAQ,EACxB,CAAC,mBAAmB,EAAE,mBACpB,YACA,oCAAoC,CAAC;YAEzC,SAAS,KAAK,QAAQ,EAAE;YACxB,SAAS;QACX,EAAE,OAAO,GAAG;YACV,SAAS,GAAG,MAAM,SAAS,GAAG,WAAW;YACzC,SAAS,EAAE;QACb,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAW;IAEf,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,SAAS;IAEf,MAAM,SAAS,IAAA,oNAAW,EACxB,OAAO;QACL,MAAM,IAAA,sHAAQ,EAAC,CAAC,gBAAgB,CAAC,EAAE;YACjC,QAAQ;YACR,MAAM;gBAAE,IAAI,QAAQ,EAAE,IAAI;gBAAM,GAAG,OAAO;YAAC;QAC7C;QACA,MAAM;IACR,GACA;QAAC;KAAO;IAGV,MAAM,SAAS,IAAA,oNAAW,EACxB,OAAO;QACL,IAAI,CAAC,QAAQ,iBAAiB;QAC9B,MAAM,IAAA,sHAAQ,EAAC,CAAC,iBAAiB,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS;QAC5D,MAAM;IACR,GACA;QAAC;KAAO;IAGV,OAAO;QAAE;QAAO;QAAS;QAAO;QAAG;QAAM;QAAQ;QAAQ;IAAO;AAClE","debugId":null}}]
}