{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/background-gradient.jsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\r\nimport React from \"react\";\r\nimport { motion } from \"motion/react\";\r\n\r\nexport const BackgroundGradient = ({\r\n  children,\r\n  className,\r\n  containerClassName,\r\n  animate = true\r\n}) => {\r\n  const variants = {\r\n    initial: {\r\n      backgroundPosition: \"0 50%\",\r\n    },\r\n    animate: {\r\n      backgroundPosition: [\"0, 50%\", \"100% 50%\", \"0 50%\"],\r\n    },\r\n  };\r\n  return (\r\n    <div className={cn(\"relative p-[4px] group\", containerClassName)}>\r\n      <motion.div\r\n        variants={animate ? variants : undefined}\r\n        initial={animate ? \"initial\" : undefined}\r\n        animate={animate ? \"animate\" : undefined}\r\n        transition={\r\n          animate\r\n            ? {\r\n                duration: 5,\r\n                repeat: Infinity,\r\n                repeatType: \"reverse\",\r\n              }\r\n            : undefined\r\n        }\r\n        style={{\r\n          backgroundSize: animate ? \"400% 400%\" : undefined,\r\n        }}\r\n        className={cn(\r\n          \"absolute inset-0 rounded-3xl z-[1] opacity-60 group-hover:opacity-100 blur-xl  transition duration-500 will-change-transform\",\r\n          \" bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]\"\r\n        )} />\r\n      <motion.div\r\n        variants={animate ? variants : undefined}\r\n        initial={animate ? \"initial\" : undefined}\r\n        animate={animate ? \"animate\" : undefined}\r\n        transition={\r\n          animate\r\n            ? {\r\n                duration: 5,\r\n                repeat: Infinity,\r\n                repeatType: \"reverse\",\r\n              }\r\n            : undefined\r\n        }\r\n        style={{\r\n          backgroundSize: animate ? \"400% 400%\" : undefined,\r\n        }}\r\n        className={cn(\r\n          \"absolute inset-0 rounded-3xl z-[1] will-change-transform\",\r\n          \"bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]\"\r\n        )} />\r\n      <div className={cn(\"relative z-10\", className)}>{children}</div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,qBAAqB;QAAC,EACjC,QAAQ,EACR,SAAS,EACT,kBAAkB,EAClB,UAAU,IAAI,EACf;IACC,MAAM,WAAW;QACf,SAAS;YACP,oBAAoB;QACtB;QACA,SAAS;YACP,oBAAoB;gBAAC;gBAAU;gBAAY;aAAQ;QACrD;IACF;IACA,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,0BAA0B;;0BAC3C,6LAAC,uMAAM,CAAC,GAAG;gBACT,UAAU,UAAU,WAAW;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,YACE,UACI;oBACE,UAAU;oBACV,QAAQ;oBACR,YAAY;gBACd,IACA;gBAEN,OAAO;oBACL,gBAAgB,UAAU,cAAc;gBAC1C;gBACA,WAAW,IAAA,qHAAE,EACX,gIACA;;;;;;0BAEJ,6LAAC,uMAAM,CAAC,GAAG;gBACT,UAAU,UAAU,WAAW;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,SAAS,UAAU,YAAY;gBAC/B,YACE,UACI;oBACE,UAAU;oBACV,QAAQ;oBACR,YAAY;gBACd,IACA;gBAEN,OAAO;oBACL,gBAAgB,UAAU,cAAc;gBAC1C;gBACA,WAAW,IAAA,qHAAE,EACX,4DACA;;;;;;0BAEJ,6LAAC;gBAAI,WAAW,IAAA,qHAAE,EAAC,iBAAiB;0BAAa;;;;;;;;;;;;AAGvD;KA3Da","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/modal/NoticeDialog.jsx"],"sourcesContent":["\"use client\";\r\nimport Modal from \"@/components/modal/Modal\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport React from \"react\";\r\n\r\nconst tone = {\r\n  success: {\r\n    ring: \"ring-green-200 dark:ring-green-900/40\",\r\n    bg: \"bg-green-50 dark:bg-green-900/30\",\r\n    text: \"text-green-800 dark:text-green-100\",\r\n    title: \"สำเร็จ\",\r\n  },\r\n  error: {\r\n    ring: \"ring-red-200 dark:ring-red-900/40\",\r\n    bg: \"bg-red-50 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-100\",\r\n    title: \"เกิดข้อผิดพลาด\",\r\n  },\r\n  info: {\r\n    ring: \"ring-blue-200 dark:ring-blue-900/40\",\r\n    bg: \"bg-blue-50 dark:bg-blue-900/30\",\r\n    text: \"text-blue-800 dark:text-blue-100\",\r\n    title: \"แจ้งเตือน\",\r\n  },\r\n};\r\n\r\nfunction normalizeMessage(msg) {\r\n  // 1) ปล่อย ReactNode ผ่านไปได้เลย\r\n  if (React.isValidElement(msg)) return msg;\r\n\r\n  // 2) string → คืนตรงๆ\r\n  if (typeof msg === \"string\") return msg;\r\n\r\n  // 3) Error instance\r\n  if (msg instanceof Error) return msg.message || \"Unexpected error\";\r\n\r\n  // 4) รูปแบบที่พบบ่อยจาก backend\r\n  const fromCommonShape =\r\n    msg?.message ||\r\n    msg?.error ||\r\n    msg?.data?.message ||\r\n    msg?.data?.error;\r\n\r\n  if (typeof fromCommonShape === \"string\") return fromCommonShape;\r\n\r\n  // 5) fallback: stringify แบบสั้นๆ\r\n  try {\r\n    return JSON.stringify(msg);\r\n  } catch {\r\n    return \"Unknown error\";\r\n  }\r\n}\r\n\r\nexport default function NoticeDialog({\r\n  open,\r\n  onClose,\r\n  type = \"info\", // 'success' | 'error' | 'info'\r\n  title,\r\n  message,\r\n  footerButtons, // optional: <Button>...</Button>\r\n}) {\r\n  const t = tone[type] || tone.info;\r\n  const content = normalizeMessage(message);\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={onClose}\r\n      size=\"md\"\r\n      title={title || t.title}\r\n      footer={footerButtons ?? <Button onClick={onClose}>ปิด</Button>}\r\n    >\r\n      <div className={`rounded-md ${t.bg} ${t.ring} p-3`} role=\"status\" aria-live=\"polite\">\r\n        {/* ถ้า content เป็น ReactNode ก็ render ตรง ๆ ได้ */}\r\n        {typeof content === \"string\" ? (\r\n          <p className={`text-sm ${t.text}`}>{content}</p>\r\n        ) : (\r\n          <div className={`text-sm ${t.text}`}>{content}</div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,OAAO;IACX,SAAS;QACP,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;IACA,MAAM;QACJ,MAAM;QACN,IAAI;QACJ,MAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,iBAAiB,GAAG;QAczB,WACA;IAdF,kCAAkC;IAClC,kBAAI,wKAAK,CAAC,cAAc,CAAC,MAAM,OAAO;IAEtC,sBAAsB;IACtB,IAAI,OAAO,QAAQ,UAAU,OAAO;IAEpC,oBAAoB;IACpB,IAAI,eAAe,OAAO,OAAO,IAAI,OAAO,IAAI;IAEhD,gCAAgC;IAChC,MAAM,kBACJ,CAAA,gBAAA,0BAAA,IAAK,OAAO,MACZ,gBAAA,0BAAA,IAAK,KAAK,MACV,gBAAA,2BAAA,YAAA,IAAK,IAAI,cAAT,gCAAA,UAAW,OAAO,MAClB,gBAAA,2BAAA,aAAA,IAAK,IAAI,cAAT,iCAAA,WAAW,KAAK;IAElB,IAAI,OAAO,oBAAoB,UAAU,OAAO;IAEhD,kCAAkC;IAClC,IAAI;QACF,OAAO,KAAK,SAAS,CAAC;IACxB,EAAE,UAAM;QACN,OAAO;IACT;AACF;AAEe,SAAS,aAAa,KAOpC;QAPoC,EACnC,IAAI,EACJ,OAAO,EACP,OAAO,MAAM,EACb,KAAK,EACL,OAAO,EACP,aAAa,EACd,GAPoC;IAQnC,MAAM,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,IAAI;IACjC,MAAM,UAAU,iBAAiB;IAEjC,qBACE,6LAAC,2IAAK;QACJ,MAAM;QACN,SAAS;QACT,MAAK;QACL,OAAO,SAAS,EAAE,KAAK;QACvB,QAAQ,0BAAA,2BAAA,8BAAiB,6LAAC,wIAAM;YAAC,SAAS;sBAAS;;;;;;kBAEnD,cAAA,6LAAC;YAAI,WAAW,AAAC,cAAqB,OAAR,EAAE,EAAE,EAAC,KAAU,OAAP,EAAE,IAAI,EAAC;YAAO,MAAK;YAAS,aAAU;sBAEzE,OAAO,YAAY,yBAClB,6LAAC;gBAAE,WAAW,AAAC,WAAiB,OAAP,EAAE,IAAI;0BAAK;;;;;qCAEpC,6LAAC;gBAAI,WAAW,AAAC,WAAiB,OAAP,EAAE,IAAI;0BAAK;;;;;;;;;;;;;;;;AAKhD;KA7BwB","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/input.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nfunction cx(...xs) {\r\n  return xs.filter(Boolean).join(\" \");\r\n}\r\n\r\nexport const Input = React.forwardRef(function Input(\r\n  { className = \"\", ...props },\r\n  ref\r\n) {\r\n  return (\r\n    <input\r\n      ref={ref}\r\n      className={cx(\r\n        \"flex h-10 w-full rounded-md border border-neutral-300 bg-transparent px-3 py-2 text-sm\",\r\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-900/20\",\r\n        \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n        \"dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGA,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,KAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,GAAH,QAAA,SAAA,CAAA,KAAK;;IACf,OAAO,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC;AACjC;AAEO,MAAM,sBAAQ,wKAAK,CAAC,UAAU,MAAC,SAAS,MAC7C,KAA4B,EAC5B,GAAG;QADH,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,GAA5B;IAGA,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,GACT,0FACA,qFACA,mDACA,qEACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/label.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Label({ className = \"\", ...props }) {\r\n  return (\r\n    <label\r\n      className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGO,SAAS,MAAM,KAA4B;QAA5B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,GAA5B;IACpB,qBACE,6LAAC;QACC,WAAW,AAAC,8FAAuG,OAAV;QACxG,GAAG,KAAK;;;;;;AAGf;KAPgB","debugId":null}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/ui/dialog.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useEffect } from \"react\";\r\n\r\nconst DialogCtx = createContext({ onOpenChange: () => {}, open: false });\r\n\r\nexport function Dialog({ open, onOpenChange, children }) {\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const onKey = (e) => {\r\n      if (e.key === \"Escape\") onOpenChange(false);\r\n    };\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open, onOpenChange]);\r\n  return (\r\n    <DialogCtx.Provider value={{ onOpenChange, open }}>\r\n      {children}\r\n    </DialogCtx.Provider>\r\n  );\r\n}\r\n\r\nexport function DialogContent({ className = \"\", children, ...rest }) {\r\n  const { open, onOpenChange } = useContext(DialogCtx);\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50\" aria-modal=\"true\" role=\"dialog\">\r\n      <div\r\n        className=\"absolute inset-0 bg-black/50\"\r\n        onClick={() => onOpenChange(false)}\r\n      />\r\n      <div className=\"absolute inset-0 grid place-items-center p-4\">\r\n        <div\r\n          className={`w-full max-w-lg rounded-lg bg-white dark:bg-neutral-900 shadow-2xl border dark:border-neutral-800 ${className}`}\r\n          {...rest}\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport function DialogHeader({ className = \"\", ...props }) {\r\n  return <div className={`border-b px-6 py-4 ${className}`} {...props} />;\r\n}\r\nexport function DialogTitle({ className = \"\", ...props }) {\r\n  return <h2 className={`text-lg font-semibold ${className}`} {...props} />;\r\n}\r\nexport function DialogFooter({ className = \"\", ...props }) {\r\n  return (\r\n    <div\r\n      className={`border-t px-6 py-4 flex justify-end gap-2 ${className}`}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nexport function DialogClose({ asChild, children }) {\r\n  const { onOpenChange } = useContext(DialogCtx);\r\n  if (asChild && React.isValidElement(children)) {\r\n    return React.cloneElement(children, {\r\n      onClick: (e) => {\r\n        children.props?.onClick?.(e);\r\n        onOpenChange(false);\r\n      },\r\n    });\r\n  }\r\n  return (\r\n    <button\r\n      onClick={() => onOpenChange(false)}\r\n      className=\"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm\"\r\n    >\r\n      {children || \"Close\"}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA;;;AADA;;AAGA,MAAM,0BAAY,IAAA,8KAAa,EAAC;IAAE,cAAc,KAAO;IAAG,MAAM;AAAM;AAE/D,SAAS,OAAO,KAAgC;QAAhC,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,GAAhC;;IACrB,IAAA,0KAAS;4BAAC;YACR,IAAI,CAAC,MAAM;YACX,MAAM;0CAAQ,CAAC;oBACb,IAAI,EAAE,GAAG,KAAK,UAAU,aAAa;gBACvC;;YACA,OAAO,gBAAgB,CAAC,WAAW;YACnC;oCAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;2BAAG;QAAC;QAAM;KAAa;IACvB,qBACE,6LAAC,UAAU,QAAQ;QAAC,OAAO;YAAE;YAAc;QAAK;kBAC7C;;;;;;AAGP;GAdgB;KAAA;AAgBT,SAAS,cAAc,KAAqC;QAArC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,GAAG,MAAM,GAArC;;IAC5B,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,IAAA,2KAAU,EAAC;IAC1C,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,6LAAC;QAAI,WAAU;QAAqB,cAAW;QAAO,MAAK;;0BACzD,6LAAC;gBACC,WAAU;gBACV,SAAS,IAAM,aAAa;;;;;;0BAE9B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAW,AAAC,qGAA8G,OAAV;oBAC/G,GAAG,IAAI;8BAEP;;;;;;;;;;;;;;;;;AAKX;IAnBgB;MAAA;AAoBT,SAAS,aAAa,KAA4B;QAA5B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,GAA5B;IAC3B,qBAAO,6LAAC;QAAI,WAAW,AAAC,sBAA+B,OAAV;QAAc,GAAG,KAAK;;;;;;AACrE;MAFgB;AAGT,SAAS,YAAY,KAA4B;QAA5B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,GAA5B;IAC1B,qBAAO,6LAAC;QAAG,WAAW,AAAC,yBAAkC,OAAV;QAAc,GAAG,KAAK;;;;;;AACvE;MAFgB;AAGT,SAAS,aAAa,KAA4B;QAA5B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,GAA5B;IAC3B,qBACE,6LAAC;QACC,WAAW,AAAC,6CAAsD,OAAV;QACvD,GAAG,KAAK;;;;;;AAGf;MAPgB;AAQT,SAAS,YAAY,KAAqB;QAArB,EAAE,OAAO,EAAE,QAAQ,EAAE,GAArB;;IAC1B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,2KAAU,EAAC;IACpC,IAAI,yBAAW,wKAAK,CAAC,cAAc,CAAC,WAAW;QAC7C,qBAAO,wKAAK,CAAC,YAAY,CAAC,UAAU;YAClC,SAAS,CAAC;oBACR,yBAAA;iBAAA,kBAAA,SAAS,KAAK,cAAd,uCAAA,0BAAA,gBAAgB,OAAO,cAAvB,8CAAA,6BAAA,iBAA0B;gBAC1B,aAAa;YACf;QACF;IACF;IACA,qBACE,6LAAC;QACC,SAAS,IAAM,aAAa;QAC5B,WAAU;kBAET,YAAY;;;;;;AAGnB;IAlBgB;MAAA","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/api/auth.js"],"sourcesContent":["import { apiFetch } from \"@/api\";\r\n\r\nexport async function forgotPassword(email) {\r\n  return apiFetch(\"/api/auth/forgot-password\", {\r\n    method: \"POST\",\r\n    body: { email },\r\n  });\r\n}\r\nexport async function resetPassword({ code, newPassword }) {\r\n  return apiFetch(\"/api/auth/reset-password\", {\r\n    method: \"POST\",\r\n    body: { code, newPassword },\r\n  });\r\n}\r\nexport async function changePassword({ currentPassword, newPassword }) {\r\n  return apiFetch(\"/api/auth/change-password\", {\r\n    method: \"POST\",\r\n    body: { currentPassword, newPassword },\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,eAAe,eAAe,KAAK;IACxC,OAAO,IAAA,2HAAQ,EAAC,6BAA6B;QAC3C,QAAQ;QACR,MAAM;YAAE;QAAM;IAChB;AACF;AACO,eAAe,cAAc,KAAqB;QAArB,EAAE,IAAI,EAAE,WAAW,EAAE,GAArB;IAClC,OAAO,IAAA,2HAAQ,EAAC,4BAA4B;QAC1C,QAAQ;QACR,MAAM;YAAE;YAAM;QAAY;IAC5B;AACF;AACO,eAAe,eAAe,KAAgC;QAAhC,EAAE,eAAe,EAAE,WAAW,EAAE,GAAhC;IACnC,OAAO,IAAA,2HAAQ,EAAC,6BAA6B;QAC3C,QAAQ;QACR,MAAM;YAAE;YAAiB;QAAY;IACvC;AACF","debugId":null}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/auth/dialogs/ChangePasswordDialog.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { changePassword } from \"@/api/auth\";\r\n\r\nexport default function ChangePasswordDialog({ open, onOpenChange }) {\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [busy, setBusy] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function resetAll() {\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirm(\"\");\r\n    setError(\"\");\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e?.preventDefault();\r\n    setError(\"\");\r\n    if (!currentPassword || !newPassword) return setError(\"กรอกข้อมูลให้ครบ\");\r\n    if (newPassword.length < 8) return setError(\"รหัสผ่านใหม่อย่างน้อย 8 ตัว\");\r\n    if (newPassword !== confirm) return setError(\"รหัสผ่านใหม่ไม่ตรงกัน\");\r\n\r\n    setBusy(true);\r\n    try {\r\n      await changePassword({ currentPassword, newPassword });\r\n      resetAll();\r\n      onOpenChange?.(false);\r\n    } catch (e) {\r\n      setError(e?.data?.message || e?.message || \"เปลี่ยนรหัสผ่านไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onOpenChange={(v) => {\r\n        if (!v) resetAll();\r\n        onOpenChange?.(v);\r\n      }}\r\n    >\r\n      <DialogContent className=\"sm:max-w-[480px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>เปลี่ยนรหัสผ่าน</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form id=\"change-pass-form\" onSubmit={onSubmit} className=\"space-y-4\">\r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"cur-pass\">รหัสผ่านปัจจุบัน</Label>\r\n            <Input\r\n              id=\"cur-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"current-password\"\r\n              value={currentPassword}\r\n              onChange={(e) => setCurrentPassword(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"new-pass\">รหัสผ่านใหม่ (≥ 8)</Label>\r\n            <Input\r\n              id=\"new-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"new-password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"confirm-pass\">ยืนยันรหัสผ่านใหม่</Label>\r\n            <Input\r\n              id=\"confirm-pass\"\r\n              type=\"password\"\r\n              autoComplete=\"new-password\"\r\n              value={confirm}\r\n              onChange={(e) => setConfirm(e.target.value)}\r\n            />\r\n          </div>\r\n        </form>\r\n\r\n        <DialogFooter className=\"gap-2\">\r\n          <DialogClose asChild>\r\n            <Button variant=\"outline\" disabled={busy}>\r\n              ยกเลิก\r\n            </Button>\r\n          </DialogClose>\r\n          <Button form=\"change-pass-form\" disabled={busy}>\r\n            {busy ? \"กำลังบันทึก...\" : \"บันทึก\"}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AAQA;;;AAbA;;;;;;;AAee,SAAS,qBAAqB,KAAsB;QAAtB,EAAE,IAAI,EAAE,YAAY,EAAE,GAAtB;;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,SAAS;QACP,mBAAmB;QACnB,eAAe;QACf,WAAW;QACX,SAAS;IACX;IAEA,eAAe,SAAS,CAAC;QACvB,cAAA,wBAAA,EAAG,cAAc;QACjB,SAAS;QACT,IAAI,CAAC,mBAAmB,CAAC,aAAa,OAAO,SAAS;QACtD,IAAI,YAAY,MAAM,GAAG,GAAG,OAAO,SAAS;QAC5C,IAAI,gBAAgB,SAAS,OAAO,SAAS;QAE7C,QAAQ;QACR,IAAI;YACF,MAAM,IAAA,gIAAc,EAAC;gBAAE;gBAAiB;YAAY;YACpD;YACA,yBAAA,mCAAA,aAAe;QACjB,EAAE,OAAO,GAAG;gBACD;YAAT,SAAS,CAAA,cAAA,yBAAA,UAAA,EAAG,IAAI,cAAP,8BAAA,QAAS,OAAO,MAAI,cAAA,wBAAA,EAAG,OAAO,KAAI;QAC7C,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,6LAAC,wIAAM;QACL,MAAM;QACN,cAAc,CAAC;YACb,IAAI,CAAC,GAAG;YACR,yBAAA,mCAAA,aAAe;QACjB;kBAEA,cAAA,6LAAC,+IAAa;YAAC,WAAU;;8BACvB,6LAAC,8IAAY;8BACX,cAAA,6LAAC,6IAAW;kCAAC;;;;;;;;;;;8BAGf,6LAAC;oBAAK,IAAG;oBAAmB,UAAU;oBAAU,WAAU;;wBACvD,uBAAS,6LAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAE/C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,sIAAK;oCAAC,SAAQ;8CAAW;;;;;;8CAC1B,6LAAC,sIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAItD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,sIAAK;oCAAC,SAAQ;8CAAW;;;;;;8CAC1B,6LAAC,sIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAIlD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,sIAAK;oCAAC,SAAQ;8CAAe;;;;;;8CAC9B,6LAAC,sIAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,cAAa;oCACb,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;8BAKhD,6LAAC,8IAAY;oBAAC,WAAU;;sCACtB,6LAAC,6IAAW;4BAAC,OAAO;sCAClB,cAAA,6LAAC,wIAAM;gCAAC,SAAQ;gCAAU,UAAU;0CAAM;;;;;;;;;;;sCAI5C,6LAAC,wIAAM;4BAAC,MAAK;4BAAmB,UAAU;sCACvC,OAAO,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;AAMvC;GAhGwB;KAAA","debugId":null}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/SignaturePad.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * SignaturePad: ลายเซ็นสดบน <canvas> (รองรับ mouse + touch + high-DPI)\r\n * props:\r\n * - height: ความสูง canvas (px)\r\n * - penSize: ความหนาปากกา (px)\r\n * - penColor: สีเส้น\r\n * - bgColor: พื้นหลัง (null = โปร่งใส)\r\n * - onSave(blob) => callback เมื่อกด \"บันทึก\"\r\n */\r\nexport default function SignaturePad({\r\n  height = 160,\r\n  penSize = 2,\r\n  penColor = \"#000000\",\r\n  bgColor = null,\r\n  onSave,\r\n}) {\r\n  const wrapRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const ctxRef = useRef(null);\r\n  const drawing = useRef(false);\r\n  const lastPt = useRef({ x: 0, y: 0 });\r\n  const [paths, setPaths] = useState([]); // เก็บเส้นสำหรับ Undo\r\n  const [currentPath, setCurrentPath] = useState([]);\r\n\r\n  // resize ให้พอดีกับความกว้าง container + รองรับ DPR\r\n  function resizeCanvas() {\r\n    const canvas = canvasRef.current;\r\n    const wrap = wrapRef.current;\r\n    if (!canvas || !wrap) return;\r\n\r\n    const dpi = window.devicePixelRatio || 1;\r\n    const cssWidth = wrap.clientWidth;\r\n    const cssHeight = height;\r\n\r\n    canvas.width = Math.max(1, Math.floor(cssWidth * dpi));\r\n    canvas.height = Math.max(1, Math.floor(cssHeight * dpi));\r\n    canvas.style.width = cssWidth + \"px\";\r\n    canvas.style.height = cssHeight + \"px\";\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.setTransform(dpi, 0, 0, dpi, 0, 0); // scale หนึ่งครั้ง ตาม DPR\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = \"round\";\r\n    ctx.strokeStyle = penColor;\r\n    ctx.lineWidth = penSize;\r\n    ctxRef.current = ctx;\r\n\r\n    redrawAll();\r\n  }\r\n\r\n  useEffect(() => {\r\n    resizeCanvas();\r\n    const onR = () => resizeCanvas();\r\n    window.addEventListener(\"resize\", onR);\r\n    return () => window.removeEventListener(\"resize\", onR);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [height]);\r\n\r\n  useEffect(() => {\r\n    // เปลี่ยนสี/ขนาดปากกาแบบ live\r\n    const ctx = ctxRef.current;\r\n    if (ctx) {\r\n      ctx.strokeStyle = penColor;\r\n      ctx.lineWidth = penSize;\r\n    }\r\n  }, [penColor, penSize]);\r\n\r\n  function getXY(e) {\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    if (e.touches && e.touches[0]) {\r\n      const t = e.touches[0];\r\n      return { x: t.clientX - rect.left, y: t.clientY - rect.top };\r\n    }\r\n    return { x: e.clientX - rect.left, y: e.clientY - rect.top };\r\n  }\r\n\r\n  function drawLine(from, to) {\r\n    const ctx = ctxRef.current;\r\n    ctx.beginPath();\r\n    ctx.moveTo(from.x, from.y);\r\n    ctx.lineTo(to.x, to.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  function handleDown(e) {\r\n    e.preventDefault();\r\n    drawing.current = true;\r\n    const p = getXY(e);\r\n    lastPt.current = p;\r\n    setCurrentPath([{ x: p.x, y: p.y }]);\r\n  }\r\n  function handleMove(e) {\r\n    if (!drawing.current) return;\r\n    e.preventDefault();\r\n    const p = getXY(e);\r\n    drawLine(lastPt.current, p);\r\n    lastPt.current = p;\r\n    setCurrentPath((prev) => [...prev, { x: p.x, y: p.y }]);\r\n  }\r\n  function handleUp(e) {\r\n    if (!drawing.current) return;\r\n    e.preventDefault();\r\n    drawing.current = false;\r\n    setPaths((prev) => (currentPath.length ? [...prev, currentPath] : prev));\r\n    setCurrentPath([]);\r\n  }\r\n\r\n  function clearAll() {\r\n    setPaths([]);\r\n    setCurrentPath([]);\r\n    const ctx = ctxRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!ctx || !canvas) return;\r\n    if (bgColor) {\r\n      ctx.save();\r\n      ctx.fillStyle = bgColor;\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      ctx.restore();\r\n    } else {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  }\r\n\r\n  function undoLast() {\r\n    if (!paths.length) return;\r\n    const copy = paths.slice(0, -1);\r\n    setPaths(copy);\r\n    setCurrentPath([]);\r\n    redrawAll(copy);\r\n  }\r\n\r\n  function redrawAll(_paths = paths) {\r\n    const ctx = ctxRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!ctx || !canvas) return;\r\n\r\n    if (bgColor) {\r\n      ctx.save();\r\n      ctx.fillStyle = bgColor;\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      ctx.restore();\r\n    } else {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    ctx.save();\r\n    ctx.strokeStyle = penColor;\r\n    ctx.lineWidth = penSize;\r\n    for (const path of _paths) {\r\n      for (let i = 1; i < path.length; i++) {\r\n        const a = path[i - 1];\r\n        const b = path[i];\r\n        ctx.beginPath();\r\n        ctx.moveTo(a.x, a.y);\r\n        ctx.lineTo(b.x, b.y);\r\n        ctx.stroke();\r\n      }\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  async function handleSave() {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    // สร้าง PNG โปร่งใส (หรือมี bg ตามที่กำหนด)\r\n    canvas.toBlob((blob) => {\r\n      if (blob && onSave) onSave(blob);\r\n    }, \"image/png\", 1);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div ref={wrapRef} className=\"w-full\">\r\n        <canvas\r\n          ref={canvasRef}\r\n          className=\"w-full rounded-md border bg-white touch-none select-none\"\r\n          style={{ display: \"block\", height }}\r\n          onMouseDown={handleDown}\r\n          onMouseMove={handleMove}\r\n          onMouseUp={handleUp}\r\n          onMouseLeave={handleUp}\r\n          onTouchStart={handleDown}\r\n          onTouchMove={handleMove}\r\n          onTouchEnd={handleUp}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-2\">\r\n        <button type=\"button\" className=\"px-3 py-1.5 rounded-md border\" onClick={clearAll}>\r\n          ล้าง\r\n        </button>\r\n        <button type=\"button\" className=\"px-3 py-1.5 rounded-md border\" onClick={undoLast}>\r\n          ย้อนกลับ\r\n        </button>\r\n\r\n        <div className=\"ml-auto flex items-center gap-2 text-sm\">\r\n          <label className=\"inline-flex items-center gap-1\">\r\n            ขนาดเส้น\r\n            <input\r\n              type=\"range\"\r\n              min={1}\r\n              max={6}\r\n              defaultValue={penSize}\r\n              onChange={(e) => {\r\n                const ctx = ctxRef.current;\r\n                if (ctx) ctx.lineWidth = Number(e.target.value) || 2;\r\n              }}\r\n            />\r\n          </label>\r\n          <label className=\"inline-flex items-center gap-1\">\r\n            สี\r\n            <input\r\n              type=\"color\"\r\n              defaultValue={penColor}\r\n              onChange={(e) => {\r\n                const ctx = ctxRef.current;\r\n                if (ctx) ctx.strokeStyle = e.target.value;\r\n              }}\r\n            />\r\n          </label>\r\n          <button type=\"button\" className=\"px-3 py-1.5 rounded-md border bg-black text-white\" onClick={handleSave}>\r\n            บันทึกลายเซ็น\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAae,SAAS,aAAa,KAMpC;QANoC,EACnC,SAAS,GAAG,EACZ,UAAU,CAAC,EACX,WAAW,SAAS,EACpB,UAAU,IAAI,EACd,MAAM,EACP,GANoC;;IAOnC,MAAM,UAAU,IAAA,uKAAM,EAAC;IACvB,MAAM,YAAY,IAAA,uKAAM,EAAC;IACzB,MAAM,SAAS,IAAA,uKAAM,EAAC;IACtB,MAAM,UAAU,IAAA,uKAAM,EAAC;IACvB,MAAM,SAAS,IAAA,uKAAM,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,EAAE,GAAG,sBAAsB;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAEjD,oDAAoD;IACpD,SAAS;QACP,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,OAAO,QAAQ,OAAO;QAC5B,IAAI,CAAC,UAAU,CAAC,MAAM;QAEtB,MAAM,MAAM,OAAO,gBAAgB,IAAI;QACvC,MAAM,WAAW,KAAK,WAAW;QACjC,MAAM,YAAY;QAElB,OAAO,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,WAAW;QACjD,OAAO,MAAM,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,YAAY;QACnD,OAAO,KAAK,CAAC,KAAK,GAAG,WAAW;QAChC,OAAO,KAAK,CAAC,MAAM,GAAG,YAAY;QAElC,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,YAAY,CAAC,KAAK,GAAG,GAAG,KAAK,GAAG,IAAI,2BAA2B;QACnE,IAAI,OAAO,GAAG;QACd,IAAI,QAAQ,GAAG;QACf,IAAI,WAAW,GAAG;QAClB,IAAI,SAAS,GAAG;QAChB,OAAO,OAAO,GAAG;QAEjB;IACF;IAEA,IAAA,0KAAS;kCAAC;YACR;YACA,MAAM;8CAAM,IAAM;;YAClB,OAAO,gBAAgB,CAAC,UAAU;YAClC;0CAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QAClD,uDAAuD;QACzD;iCAAG;QAAC;KAAO;IAEX,IAAA,0KAAS;kCAAC;YACR,8BAA8B;YAC9B,MAAM,MAAM,OAAO,OAAO;YAC1B,IAAI,KAAK;gBACP,IAAI,WAAW,GAAG;gBAClB,IAAI,SAAS,GAAG;YAClB;QACF;iCAAG;QAAC;QAAU;KAAQ;IAEtB,SAAS,MAAM,CAAC;QACd,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,OAAO,OAAO,qBAAqB;QACzC,IAAI,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC,EAAE,EAAE;YAC7B,MAAM,IAAI,EAAE,OAAO,CAAC,EAAE;YACtB,OAAO;gBAAE,GAAG,EAAE,OAAO,GAAG,KAAK,IAAI;gBAAE,GAAG,EAAE,OAAO,GAAG,KAAK,GAAG;YAAC;QAC7D;QACA,OAAO;YAAE,GAAG,EAAE,OAAO,GAAG,KAAK,IAAI;YAAE,GAAG,EAAE,OAAO,GAAG,KAAK,GAAG;QAAC;IAC7D;IAEA,SAAS,SAAS,IAAI,EAAE,EAAE;QACxB,MAAM,MAAM,OAAO,OAAO;QAC1B,IAAI,SAAS;QACb,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC;QACzB,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC;QACrB,IAAI,MAAM;IACZ;IAEA,SAAS,WAAW,CAAC;QACnB,EAAE,cAAc;QAChB,QAAQ,OAAO,GAAG;QAClB,MAAM,IAAI,MAAM;QAChB,OAAO,OAAO,GAAG;QACjB,eAAe;YAAC;gBAAE,GAAG,EAAE,CAAC;gBAAE,GAAG,EAAE,CAAC;YAAC;SAAE;IACrC;IACA,SAAS,WAAW,CAAC;QACnB,IAAI,CAAC,QAAQ,OAAO,EAAE;QACtB,EAAE,cAAc;QAChB,MAAM,IAAI,MAAM;QAChB,SAAS,OAAO,OAAO,EAAE;QACzB,OAAO,OAAO,GAAG;QACjB,eAAe,CAAC,OAAS;mBAAI;gBAAM;oBAAE,GAAG,EAAE,CAAC;oBAAE,GAAG,EAAE,CAAC;gBAAC;aAAE;IACxD;IACA,SAAS,SAAS,CAAC;QACjB,IAAI,CAAC,QAAQ,OAAO,EAAE;QACtB,EAAE,cAAc;QAChB,QAAQ,OAAO,GAAG;QAClB,SAAS,CAAC,OAAU,YAAY,MAAM,GAAG;mBAAI;gBAAM;aAAY,GAAG;QAClE,eAAe,EAAE;IACnB;IAEA,SAAS;QACP,SAAS,EAAE;QACX,eAAe,EAAE;QACjB,MAAM,MAAM,OAAO,OAAO;QAC1B,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,OAAO,CAAC,QAAQ;QACrB,IAAI,SAAS;YACX,IAAI,IAAI;YACR,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAC9C,IAAI,OAAO;QACb,OAAO;YACL,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;QACjD;IACF;IAEA,SAAS;QACP,IAAI,CAAC,MAAM,MAAM,EAAE;QACnB,MAAM,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC;QAC7B,SAAS;QACT,eAAe,EAAE;QACjB,UAAU;IACZ;IAEA,SAAS;YAAU,SAAA,iEAAS;QAC1B,MAAM,MAAM,OAAO,OAAO;QAC1B,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,OAAO,CAAC,QAAQ;QAErB,IAAI,SAAS;YACX,IAAI,IAAI;YACR,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAC9C,IAAI,OAAO;QACb,OAAO;YACL,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;QACjD;QAEA,IAAI,IAAI;QACR,IAAI,WAAW,GAAG;QAClB,IAAI,SAAS,GAAG;QAChB,KAAK,MAAM,QAAQ,OAAQ;YACzB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;gBACpC,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrB,MAAM,IAAI,IAAI,CAAC,EAAE;gBACjB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnB,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnB,IAAI,MAAM;YACZ;QACF;QACA,IAAI,OAAO;IACb;IAEA,eAAe;QACb,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,4CAA4C;QAC5C,OAAO,MAAM,CAAC,CAAC;YACb,IAAI,QAAQ,QAAQ,OAAO;QAC7B,GAAG,aAAa;IAClB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,KAAK;gBAAS,WAAU;0BAC3B,cAAA,6LAAC;oBACC,KAAK;oBACL,WAAU;oBACV,OAAO;wBAAE,SAAS;wBAAS;oBAAO;oBAClC,aAAa;oBACb,aAAa;oBACb,WAAW;oBACX,cAAc;oBACd,cAAc;oBACd,aAAa;oBACb,YAAY;;;;;;;;;;;0BAIhB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,MAAK;wBAAS,WAAU;wBAAgC,SAAS;kCAAU;;;;;;kCAGnF,6LAAC;wBAAO,MAAK;wBAAS,WAAU;wBAAgC,SAAS;kCAAU;;;;;;kCAInF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;;oCAAiC;kDAEhD,6LAAC;wCACC,MAAK;wCACL,KAAK;wCACL,KAAK;wCACL,cAAc;wCACd,UAAU,CAAC;4CACT,MAAM,MAAM,OAAO,OAAO;4CAC1B,IAAI,KAAK,IAAI,SAAS,GAAG,OAAO,EAAE,MAAM,CAAC,KAAK,KAAK;wCACrD;;;;;;;;;;;;0CAGJ,6LAAC;gCAAM,WAAU;;oCAAiC;kDAEhD,6LAAC;wCACC,MAAK;wCACL,cAAc;wCACd,UAAU,CAAC;4CACT,MAAM,MAAM,OAAO,OAAO;4CAC1B,IAAI,KAAK,IAAI,WAAW,GAAG,EAAE,MAAM,CAAC,KAAK;wCAC3C;;;;;;;;;;;;0CAGJ,6LAAC;gCAAO,MAAK;gCAAS,WAAU;gCAAoD,SAAS;0CAAY;;;;;;;;;;;;;;;;;;;;;;;;AAOnH;GA3NwB;KAAA","debugId":null}},
    {"offset": {"line": 1058, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/components/account/MeClient.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { apiFetch, toApiUrl } from \"@/api\";\r\nimport StatefulButton from \"@/components/ui/stateful-button\";\r\nimport { BackgroundGradient } from \"@/components/ui/background-gradient\";\r\nimport NoticeDialog from \"@/components/modal/NoticeDialog\";\r\nimport ChangePasswordDialog from \"@/components/auth/dialogs/ChangePasswordDialog\";\r\nimport SignaturePad from \"@/components/SignaturePad\";\r\n\r\nconst EMPLOYEE_TYPES = {\r\n  DAILY: \"DAILY (รายวัน)\",\r\n  MONTHLY: \"MONTHLY (รายเดือน)\",\r\n};\r\nconst CONTRACT_TYPES = {\r\n  PERMANENT: \"PERMANENT (ประจำ)\",\r\n  TEMPORARY: \"TEMPORARY (ชั่วคราว)\",\r\n  PROBATION: \"PROBATION (ทดลองงาน)\",\r\n};\r\nconst GENDERS = { MALE: \"ชาย\", FEMALE: \"หญิง\", OTHER: \"อื่น ๆ\" };\r\n\r\nfunction fmtDate(d) {\r\n  if (!d) return \"\";\r\n  try {\r\n    const dt = typeof d === \"string\" ? new Date(d) : d;\r\n    if (Number.isNaN(dt.getTime())) return \"\";\r\n    return dt.toISOString().slice(0, 10);\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default function MeClient() {\r\n  const router = useRouter();\r\n  const { user, loading, reload } = useAuth();\r\n\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    name: \"\",\r\n    firstNameTh: \"\",\r\n    lastNameTh: \"\",\r\n    firstNameEn: \"\",\r\n    lastNameEn: \"\",\r\n  });\r\n\r\n  const [readonly, setReadonly] = useState({\r\n    organizationName: \"\",\r\n    employeeCode: \"\",\r\n    employeeType: \"\",\r\n    contractType: \"\",\r\n    gender: \"\",\r\n    birthDate: \"\",\r\n    startDate: \"\",\r\n    probationEndDate: \"\",\r\n    resignedAt: \"\",\r\n    roleName: \"\",\r\n    primaryDept: null,\r\n    otherDepts: [],\r\n  });\r\n\r\n  const [busy, setBusy] = useState(false);\r\n  const [notice, setNotice] = useState({\r\n    open: false,\r\n    type: \"info\",\r\n    message: \"\",\r\n  });\r\n  const [showChangePass, setShowChangePass] = useState(false);\r\n\r\n  // ✅ ใช้ toApiUrl + cache bust\r\n  const [avatarTick, setAvatarTick] = useState(0);\r\n  const [avatarError, setAvatarError] = useState(false);\r\n  const avatarUrl = useMemo(() => {\r\n    if (!user?.id) return \"\";\r\n    const abs = toApiUrl(`/api/files/avatar/${user.id}`);\r\n    const sep = abs.includes(\"?\") ? \"&\" : \"?\";\r\n    return `${abs}${sep}ts=${avatarTick}`;\r\n  }, [user?.id, avatarTick]);\r\n\r\n  const [signTick, setSignTick] = useState(0);\r\n  const [signError, setSignError] = useState(false);\r\n  const signatureUrl = useMemo(() => {\r\n    if (!user?.id) return \"\";\r\n    const abs = toApiUrl(`/api/files/signature/${user.id}`);\r\n    const sep = abs.includes(\"?\") ? \"&\" : \"?\";\r\n    return `${abs}${sep}ts=${signTick}`;\r\n  }, [user?.id, signTick]);\r\n\r\n  const [showDrawPad, setShowDrawPad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!loading && !user) router.replace(\"/auth/login?callbackUrl=/me\");\r\n  }, [loading, user, router]);\r\n\r\n  useEffect(() => {\r\n    let stop = false;\r\n    (async () => {\r\n      if (!user?.id) return;\r\n      try {\r\n        const res = await apiFetch(`/api/users/${user.id}`);\r\n        const u = res?.data || {};\r\n        if (stop) return;\r\n\r\n        setForm({\r\n          email: u.email || \"\",\r\n          name: u.name || \"\",\r\n          firstNameTh: u.firstNameTh || \"\",\r\n          lastNameTh: u.lastNameTh || \"\",\r\n          firstNameEn: u.firstNameEn || \"\",\r\n          lastNameEn: u.lastNameEn || \"\",\r\n        });\r\n\r\n        const primary = u.primaryUserDept?.department\r\n          ? {\r\n              code: u.primaryUserDept.department.code,\r\n              nameTh: u.primaryUserDept.department.nameTh,\r\n              positionLevel: u.primaryUserDept.positionLevel || \"\",\r\n              positionName: u.primaryUserDept.positionName || \"\",\r\n            }\r\n          : null;\r\n\r\n        const others = (u.userDepartments || [])\r\n          .filter((d) => !d.endedAt && d.id !== u.primaryUserDept?.id)\r\n          .map((d) => ({\r\n            id: d.id,\r\n            code: d.department?.code,\r\n            nameTh: d.department?.nameTh,\r\n            positionLevel: d.positionLevel || \"\",\r\n            positionName: d.positionName || \"\",\r\n          }));\r\n\r\n        setReadonly({\r\n          organizationName:\r\n            u.organization?.nameTh || u.organization?.nameEn || \"\",\r\n          employeeCode: u.employeeCode || \"\",\r\n          employeeType: EMPLOYEE_TYPES[u.employeeType] || \"\",\r\n          contractType: CONTRACT_TYPES[u.contractType] || \"\",\r\n          gender: GENDERS[u.gender] || \"\",\r\n          birthDate: fmtDate(u.birthDate),\r\n          startDate: fmtDate(u.startDate),\r\n          probationEndDate: fmtDate(u.probationEndDate),\r\n          resignedAt: fmtDate(u.resignedAt),\r\n          roleName: u.role?.name || \"\",\r\n          primaryDept: primary,\r\n          otherDepts: others,\r\n        });\r\n\r\n        setAvatarError(false);\r\n        setSignError(false);\r\n        const now = Date.now();\r\n        setAvatarTick(now);\r\n        setSignTick(now);\r\n      } catch (e) {\r\n        if (!stop)\r\n          setNotice({\r\n            open: true,\r\n            type: \"error\",\r\n            message: e?.message || \"โหลดโปรไฟล์ล้มเหลว\",\r\n          });\r\n      }\r\n    })();\r\n    return () => {\r\n      stop = true;\r\n    };\r\n  }, [user?.id]);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setBusy(true);\r\n    try {\r\n      await apiFetch(\"/api/users/me\", {\r\n        method: \"PATCH\",\r\n        body: {\r\n          name: form.name,\r\n          firstNameTh: form.firstNameTh,\r\n          lastNameTh: form.lastNameTh,\r\n          firstNameEn: form.firstNameEn,\r\n          lastNameEn: form.lastNameEn,\r\n        },\r\n      });\r\n      reload?.();\r\n      setNotice({\r\n        open: true,\r\n        type: \"success\",\r\n        message: \"บันทึกโปรไฟล์เรียบร้อย\",\r\n      });\r\n    } catch (e) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message: e?.data?.error || e?.message || \"บันทึกไม่สำเร็จ\",\r\n      });\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function uploadFile({\r\n    file,\r\n    field,\r\n    url,\r\n    tickSetter,\r\n    errSetter,\r\n    okMessage,\r\n  }) {\r\n    if (!file) return;\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message: \"กรุณาเลือกรูปภาพเท่านั้น\",\r\n      });\r\n      return;\r\n    }\r\n    const limit = field === \"avatar\" ? 2 * 1024 * 1024 : 1 * 1024 * 1024;\r\n    if (file.size > limit) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message:\r\n          field === \"avatar\"\r\n            ? \"ขนาดรูปโปรไฟล์ต้องไม่เกิน 2MB\"\r\n            : \"ขนาดไฟล์ลายเซ็นต้องไม่เกิน 1MB\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(field, file);\r\n      await apiFetch(url, { method: \"POST\", body: fd });\r\n      errSetter(false);\r\n      tickSetter(Date.now());\r\n      reload?.();\r\n      setNotice({ open: true, type: \"success\", message: okMessage });\r\n    } catch (e) {\r\n      setNotice({\r\n        open: true,\r\n        type: \"error\",\r\n        message:\r\n          e?.data?.message ||\r\n          e?.data?.error ||\r\n          e?.message ||\r\n          \"อัปโหลดไม่สำเร็จ\",\r\n      });\r\n    }\r\n  }\r\n\r\n  async function onUploadAvatar(file) {\r\n    await uploadFile({\r\n      file,\r\n      field: \"avatar\",\r\n      url: \"/api/files/avatar\",\r\n      tickSetter: setAvatarTick,\r\n      errSetter: setAvatarError,\r\n      okMessage: \"อัปโหลดรูปโปรไฟล์สำเร็จ\",\r\n    });\r\n  }\r\n\r\n  async function onUploadSignature(file) {\r\n    await uploadFile({\r\n      file,\r\n      field: \"signature\",\r\n      url: \"/api/files/signature\",\r\n      tickSetter: setSignTick,\r\n      errSetter: setSignError,\r\n      okMessage: \"อัปโหลดลายเซ็นสำเร็จ\",\r\n    });\r\n  }\r\n\r\n  const hasPrimary = useMemo(\r\n    () => !!readonly.primaryDept,\r\n    [readonly.primaryDept]\r\n  );\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-5xl p-6 py-30 space-y-8\">\r\n      <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n        <h2 className=\"text-xl font-semibold text-neutral-900 dark:text-neutral-100\">\r\n          โปรไฟล์ของฉัน\r\n        </h2>\r\n        <p className=\"mt-1 text-sm text-neutral-600 dark:text-neutral-400\">\r\n          แก้ไขชื่อที่แสดง อัปโหลดรูปโปรไฟล์/ลายเซ็น และดูข้อมูลบัญชีของคุณ\r\n        </p>\r\n\r\n        {/* Avatar & Signature */}\r\n        <div className=\"mt-6 grid gap-6 sm:grid-cols-2\">\r\n          {/* Avatar */}\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"grid h-16 w-16 place-items-center overflow-hidden rounded-full ring-1 ring-black/10 dark:ring-white/10 bg-neutral-200 dark:bg-neutral-800\">\r\n              {avatarUrl && !avatarError ? (\r\n                <img\r\n                  key={avatarUrl}\r\n                  src={avatarUrl}\r\n                  alt=\"avatar\"\r\n                  className=\"h-full w-full object-cover\"\r\n                  onLoad={() => setAvatarError(false)}\r\n                  onError={() => setAvatarError(true)}\r\n                  referrerPolicy=\"no-referrer\"\r\n                />\r\n              ) : (\r\n                <svg\r\n                  viewBox=\"0 0 24 24\"\r\n                  className=\"h-8 w-8 opacity-80\"\r\n                  aria-hidden=\"true\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z\"\r\n                  />\r\n                </svg>\r\n              )}\r\n            </div>\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"inline-flex cursor-pointer items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  className=\"hidden\"\r\n                  onChange={(e) => onUploadAvatar(e.target.files?.[0])}\r\n                />\r\n                <span className=\"rounded-md border px-3 py-1.5 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\">\r\n                  เลือกรูปโปรไฟล์…\r\n                </span>\r\n              </label>\r\n              <span className=\"text-xs text-neutral-500\">\r\n                PNG/JPG/WEBP ≤ 2MB\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <SignatureSection\r\n            signatureUrl={signatureUrl}\r\n            signError={signError}\r\n            setSignError={setSignError}\r\n            onUploadSignature={onUploadSignature}\r\n            showDrawPad={showDrawPad}\r\n            setShowDrawPad={setShowDrawPad}\r\n            setSignTick={setSignTick}\r\n            setNotice={setNotice}\r\n            reload={reload}\r\n          />\r\n        </div>\r\n\r\n        {/* Profile form (Editable) */}\r\n        <form className=\"mt-6 space-y-4\" onSubmit={onSubmit}>\r\n          <div className=\"space-y-1\">\r\n            <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n              องค์กร (Organization)\r\n            </label>\r\n            <input\r\n              value={readonly.organizationName || \"-\"}\r\n              disabled\r\n              className=\"w-full rounded-md border border-neutral-200 bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-300\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n              อีเมล (แก้ไขโดยผู้ดูแล)\r\n            </label>\r\n            <input\r\n              value={form.email}\r\n              disabled\r\n              className=\"w-full rounded-md border border-neutral-300 bg-neutral-100 px-3 py-2 text-sm opacity-90 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-400\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <label\r\n              htmlFor=\"name\"\r\n              className=\"text-sm text-neutral-700 dark:text-neutral-300\"\r\n            >\r\n              ชื่อที่แสดง (ชื่อเล่น)\r\n            </label>\r\n            <input\r\n              id=\"name\"\r\n              value={form.name}\r\n              onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n              className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              placeholder=\"เช่น โอ๋, Beam, ฯลฯ\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                ชื่อ (ไทย)\r\n              </label>\r\n              <input\r\n                value={form.firstNameTh}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, firstNameTh: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                นามสกุล (ไทย)\r\n              </label>\r\n              <input\r\n                value={form.lastNameTh}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, lastNameTh: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                ชื่อ (อังกฤษ)\r\n              </label>\r\n              <input\r\n                value={form.firstNameEn}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, firstNameEn: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm text-neutral-700 dark:text-neutral-300\">\r\n                นามสกุล (อังกฤษ)\r\n              </label>\r\n              <input\r\n                value={form.lastNameEn}\r\n                onChange={(e) =>\r\n                  setForm({ ...form, lastNameEn: e.target.value })\r\n                }\r\n                className=\"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/20 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowChangePass(true)}\r\n              className=\"text-sm underline\"\r\n            >\r\n              เปลี่ยนรหัสผ่าน\r\n            </button>\r\n            <StatefulButton\r\n              type=\"submit\"\r\n              loading={busy}\r\n              loadingText=\"กำลังบันทึก...\"\r\n              className=\"h-10 rounded-md bg-black px-4 text-white dark:bg-white dark:text-black\"\r\n            >\r\n              บันทึกการเปลี่ยนแปลง\r\n            </StatefulButton>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Readonly blocks */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n            <h3 className=\"text-base font-semibold mb-4\">\r\n              ข้อมูลพนักงาน (อ่านอย่างเดียว)\r\n            </h3>\r\n\r\n            <ReadonlyRow label=\"Employee Code\" value={readonly.employeeCode} />\r\n            <ReadonlyRow label=\"Employee Type\" value={readonly.employeeType} />\r\n            <ReadonlyRow label=\"Contract Type\" value={readonly.contractType} />\r\n            <ReadonlyRow label=\"Gender\" value={readonly.gender} />\r\n\r\n            <div className=\"grid gap-4 sm:grid-cols-2 mt-2\">\r\n              <ReadonlyRow label=\"Birth Date\" value={readonly.birthDate} />\r\n              <ReadonlyRow label=\"Start Date\" value={readonly.startDate} />\r\n              <ReadonlyRow\r\n                label=\"Probation End\"\r\n                value={readonly.probationEndDate}\r\n              />\r\n              <ReadonlyRow label=\"Resigned At\" value={readonly.resignedAt} />\r\n            </div>\r\n          </BackgroundGradient>\r\n\r\n          <BackgroundGradient className=\"rounded-2xl border border-neutral-200 bg-white p-6 shadow-lg dark:border-neutral-800 dark:bg-neutral-950\">\r\n            <h3 className=\"text-base font-semibold mb-4\">\r\n              สิทธิ์และสังกัด (อ่านอย่างเดียว)\r\n            </h3>\r\n\r\n            <ReadonlyRow label=\"Role\" value={readonly.roleName} />\r\n\r\n            <div className=\"mt-3\">\r\n              <div className=\"text-xs text-neutral-500 mb-1\">\r\n                Primary Department\r\n              </div>\r\n              {hasPrimary ? (\r\n                <div className=\"rounded-md border px-3 py-2 text-sm\">\r\n                  <div className=\"font-medium\">\r\n                    {readonly.primaryDept.code} · {readonly.primaryDept.nameTh}\r\n                  </div>\r\n                  <div className=\"text-xs text-neutral-600\">\r\n                    {readonly.primaryDept.positionLevel}\r\n                    {readonly.primaryDept.positionName\r\n                      ? ` (${readonly.primaryDept.positionName})`\r\n                      : \"\"}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-neutral-500\">-</div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mt-3\">\r\n              <div className=\"text-xs text-neutral-500 mb-1\">\r\n                Other Active Departments\r\n              </div>\r\n              {readonly.otherDepts?.length ? (\r\n                <div className=\"space-y-2\">\r\n                  {readonly.otherDepts.map((d) => (\r\n                    <div\r\n                      key={d.id}\r\n                      className=\"rounded-md border px-3 py-2 text-sm\"\r\n                    >\r\n                      <div className=\"font-medium\">\r\n                        {d.code} · {d.nameTh}\r\n                      </div>\r\n                      <div className=\"text-xs text-neutral-600\">\r\n                        {d.positionLevel}\r\n                        {d.positionName ? ` (${d.positionName})` : \"\"}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-neutral-500\">-</div>\r\n              )}\r\n            </div>\r\n          </BackgroundGradient>\r\n        </div>\r\n\r\n        <NoticeDialog\r\n          open={notice.open}\r\n          onClose={() => setNotice((s) => ({ ...s, open: false }))}\r\n          type={notice.type}\r\n          message={notice.message}\r\n        />\r\n        <ChangePasswordDialog\r\n          open={showChangePass}\r\n          onClose={() => setShowChangePass(false)}\r\n        />\r\n      </BackgroundGradient>\r\n    </main>\r\n  );\r\n}\r\n\r\n/** ---------------- Signature Section ---------------- */\r\nfunction SignatureSection({\r\n  signatureUrl,\r\n  signError,\r\n  setSignError,\r\n  onUploadSignature,\r\n  showDrawPad,\r\n  setShowDrawPad,\r\n  setSignTick,\r\n  setNotice,\r\n  reload,\r\n}) {\r\n  // แก้ string ให้ Tailwind อ่านได้ (_25% แทน 25% ติดกัน)\r\n  const previewClass =\r\n    \"grid place-items-center overflow-hidden rounded-md ring-1 ring-black/10 dark:ring-white/10 bg-[length:16px_16px] bg-[linear-gradient(45deg,rgba(0,0,0,.05)_25%,transparent_25%),linear-gradient(-45deg,rgba(0,0,0,.05)_25%,transparent_25%),linear-gradient(45deg,transparent_75%,rgba(0,0,0,.05)_75%),linear-gradient(-45deg,transparent_75%,rgba(0,0,0,.05)_75%)]\";\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3\">\r\n      {/* Preview */}\r\n      <div className={previewClass} style={{ width: 280, height: 90 }}>\r\n        {signatureUrl && !signError ? (\r\n          <img\r\n            key={signatureUrl}\r\n            src={signatureUrl}\r\n            alt=\"signature\"\r\n            className=\"h-full w-full object-contain\"\r\n            onLoad={() => setSignError(false)}\r\n            onError={() => setSignError(true)}\r\n            referrerPolicy=\"no-referrer\"\r\n          />\r\n        ) : (\r\n          <div className=\"px-2 text-xs text-neutral-500\">ยังไม่มีลายเซ็น</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <label className=\"inline-flex cursor-pointer items-center gap-2 text-sm\">\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"hidden\"\r\n            onChange={(e) => onUploadSignature(e.target.files?.[0])}\r\n          />\r\n          <span className=\"rounded-md border px-3 py-1.5 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\">\r\n            อัปโหลดจากไฟล์…\r\n          </span>\r\n        </label>\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setShowDrawPad((v) => !v)}\r\n          className=\"rounded-md border px-3 py-1.5 text-sm hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-900\"\r\n          aria-expanded={showDrawPad}\r\n          aria-controls=\"signature-drawpad\"\r\n        >\r\n          {showDrawPad ? \"ซ่อนพื้นที่วาด\" : \"วาดลายเซ็น\"}\r\n        </button>\r\n        <span className=\"text-xs text-neutral-500 ml-1\">\r\n          แนะนำ PNG พื้นโปร่งใส ≤ 1MB\r\n        </span>\r\n      </div>\r\n\r\n      {/* Draw pad */}\r\n      {showDrawPad && (\r\n        <div\r\n          id=\"signature-drawpad\"\r\n          className=\"mt-1 rounded-lg border p-3 dark:border-neutral-800\"\r\n        >\r\n          <div className=\"mb-2 text-xs text-neutral-500\">\r\n            วาดด้วยเมาส์/ปากกา จากนั้นกดปุ่ม “บันทึก”\r\n          </div>\r\n          <SignaturePad\r\n            height={170}\r\n            penSize={2}\r\n            penColor=\"#111111\"\r\n            bgColor={null}\r\n            onSave={async (blob) => {\r\n              try {\r\n                if (!blob) return;\r\n                if (blob.size > 1 * 1024 * 1024) {\r\n                  setNotice({\r\n                    open: true,\r\n                    type: \"error\",\r\n                    message: \"ไฟล์ลายเซ็นที่บันทึกเกิน 1MB\",\r\n                  });\r\n                  return;\r\n                }\r\n                const fd = new FormData();\r\n                fd.append(\"signature\", blob, \"signature.png\");\r\n                await apiFetch(\"/api/files/signature\", {\r\n                  method: \"POST\",\r\n                  body: fd,\r\n                });\r\n                setSignError(false);\r\n                setSignTick(Date.now());\r\n                reload?.();\r\n                setNotice({\r\n                  open: true,\r\n                  type: \"success\",\r\n                  message: \"บันทึกลายเซ็นสำเร็จ\",\r\n                });\r\n              } catch (e) {\r\n                setNotice({\r\n                  open: true,\r\n                  type: \"error\",\r\n                  message:\r\n                    e?.data?.error || e?.message || \"บันทึกลายเซ็นไม่สำเร็จ\",\r\n                });\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/** ---------------- Readonly row ---------------- */\r\nfunction ReadonlyRow({ label, value }) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"text-xs text-neutral-500\">{label}</div>\r\n      <input\r\n        value={value || \"\"}\r\n        disabled\r\n        className=\"w-full rounded-md border border-neutral-200 bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-300\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}