{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/app/%28protected%29/admin/departments/page.jsx"],"sourcesContent":["\r\n\r\n\"use client\";\r\n\r\nexport default function AdminDepartmentsPage() {\r\n  const { items, loading, error, q, setQ, reload, upsert, remove } =\r\n    useDepartments();\r\n\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [editing, setEditing] = useState(null); // { id?, code, nameTh, nameEn }\r\n\r\n  const openNew = () => {\r\n    setEditing({ code: \"\", nameTh: \"\", nameEn: \"\" });\r\n    setDialogOpen(true);\r\n  };\r\n  const openEdit = (d) => {\r\n    setEditing({\r\n      id: d.id,\r\n      code: d.code || \"\",\r\n      nameTh: d.nameTh || \"\",\r\n      nameEn: d.nameEn || \"\",\r\n    });\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  async function onSubmit(values) {\r\n    await upsert(values);\r\n    setDialogOpen(false);\r\n  }\r\n\r\n  return (\r\n    <main className=\"pt-20 px-4 sm:px-6 lg:px-8 max-w-screen-xl mx-auto space-y-4\">\r\n      <header className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\r\n        <h1 className=\"text-xl sm:text-2xl font-semibold\">Departments</h1>\r\n        <div className=\"flex flex-wrap gap-3 items-center\">\r\n          <Input\r\n            className=\"w-60\"\r\n            placeholder=\"ค้นหา department\"\r\n            value={q}\r\n            onChange={(e) => setQ(e.target.value)}\r\n          />\r\n          <Button onClick={openNew} className=\"hidden sm:inline-flex\">\r\n            <Plus className=\"h-4 w-4 mr-2\" /> สร้างใหม่\r\n          </Button>\r\n        </div>\r\n      </header>\r\n\r\n      <section className=\"rounded-xl border dark:border-neutral-800 overflow-hidden\">\r\n        <DeptTable\r\n          items={items}\r\n          loading={loading}\r\n          onEdit={openEdit}\r\n          onDelete={remove}\r\n        />\r\n      </section>\r\n\r\n      {/* FAB (mobile) */}\r\n      <Button\r\n        onClick={openNew}\r\n        className=\"sm:hidden fixed bottom-5 right-5 z-40 rounded-full h-12 w-12 p-0\"\r\n        size=\"icon\"\r\n      >\r\n        <Plus className=\"h-5 w-5\" />\r\n      </Button>\r\n\r\n      {!!error && <div className=\"text-red-500 text-sm\">{error}</div>}\r\n\r\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n        <DialogContent className=\"sm:max-w-[600px]\">\r\n          <DialogHeader>\r\n            <DialogTitle>\r\n              {editing?.id ? `แก้ไข #${editing?.id}` : \"สร้างใหม่\"}\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n\r\n          {editing && (\r\n            <DeptForm\r\n              key={editing?.id ?? \"new\"}\r\n              defaultValues={editing}\r\n              onSubmit={onSubmit}\r\n            />\r\n          )}\r\n\r\n          <DialogFooter className=\"gap-2\">\r\n            <DialogClose asChild>\r\n              <Button variant=\"outline\">ยกเลิก</Button>\r\n            </DialogClose>\r\n            <Button form=\"dept-form\">บันทึก</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEe,SAAS;;IACtB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAC9D;IAEF,MAAM,CAAC,YAAY,cAAc,GAAG,SAAS;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,SAAS,OAAO,gCAAgC;IAE9E,MAAM,UAAU;QACd,WAAW;YAAE,MAAM;YAAI,QAAQ;YAAI,QAAQ;QAAG;QAC9C,cAAc;IAChB;IACA,MAAM,WAAW,CAAC;QAChB,WAAW;YACT,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI,IAAI;YAChB,QAAQ,EAAE,MAAM,IAAI;YACpB,QAAQ,EAAE,MAAM,IAAI;QACtB;QACA,cAAc;IAChB;IAEA,eAAe,SAAS,MAAM;QAC5B,MAAM,OAAO;QACb,cAAc;IAChB;QAiDiB;IA/CjB,qBACE,6LAAC;QAAK,WAAU;;0BACd,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;;;;;;0CAEtC,6LAAC;gCAAO,SAAS;gCAAS,WAAU;;kDAClC,6LAAC;wCAAK,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;0BAKvC,6LAAC;gBAAQ,WAAU;0BACjB,cAAA,6LAAC;oBACC,OAAO;oBACP,SAAS;oBACT,QAAQ;oBACR,UAAU;;;;;;;;;;;0BAKd,6LAAC;gBACC,SAAS;gBACT,WAAU;gBACV,MAAK;0BAEL,cAAA,6LAAC;oBAAK,WAAU;;;;;;;;;;;YAGjB,CAAC,CAAC,uBAAS,6LAAC;gBAAI,WAAU;0BAAwB;;;;;;0BAEnD,6LAAC;gBAAO,MAAM;gBAAY,cAAc;0BACtC,cAAA,6LAAC;oBAAc,WAAU;;sCACvB,6LAAC;sCACC,cAAA,6LAAC;0CACE,CAAA,oBAAA,8BAAA,QAAS,EAAE,IAAG,AAAC,UAAqB,OAAZ,oBAAA,8BAAA,QAAS,EAAE,IAAK;;;;;;;;;;;wBAI5C,yBACC,6LAAC;4BAEC,eAAe;4BACf,UAAU;2BAFL,CAAA,cAAA,oBAAA,8BAAA,QAAS,EAAE,cAAX,yBAAA,cAAe;;;;;sCAMxB,6LAAC;4BAAa,WAAU;;8CACtB,6LAAC;oCAAY,OAAO;8CAClB,cAAA,6LAAC;wCAAO,SAAQ;kDAAU;;;;;;;;;;;8CAE5B,6LAAC;oCAAO,MAAK;8CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrC;GAzFwB;KAAA","debugId":null}}]
}