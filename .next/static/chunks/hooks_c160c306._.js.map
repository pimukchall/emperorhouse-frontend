{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useDebounceValue.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nexport function useDebounceValue(value, delay = 300) {\r\n  const [v, setV] = useState(value);\r\n  useEffect(() => {\r\n    const id = setTimeout(() => setV(value), delay);\r\n    return () => clearTimeout(id);\r\n  }, [value, delay]);\r\n  return v;\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AADA;;AAEO,SAAS,iBAAiB,KAAK;QAAE,QAAA,iEAAQ;;IAC9C,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,yKAAQ,EAAC;IAC3B,IAAA,0KAAS;sCAAC;YACR,MAAM,KAAK;iDAAW,IAAM,KAAK;gDAAQ;YACzC;8CAAO,IAAM,aAAa;;QAC5B;qCAAG;QAAC;QAAO;KAAM;IACjB,OAAO;AACT;GAPgB","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///D:/Workspace/emperorhouse-frontend/hooks/useDepartments.js"],"sourcesContent":["\"use client\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { apiFetch } from \"@/lib/api\";\r\nimport { useDebounceValue } from \"@/hooks/useDebounceValue\";\r\n\r\nexport function useDepartments() {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [q, setQ] = useState(\"\");\r\n  const qDebounced = useDebounceValue(q, 250);\r\n\r\n  const fetchList = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await apiFetch(\r\n        `/api/departments?q=${encodeURIComponent(\r\n          qDebounced\r\n        )}&page=1&limit=200&sortBy=id&sort=asc`\r\n      );\r\n      setItems(res?.data || []);\r\n      setError(\"\");\r\n    } catch (e) {\r\n      setError(e?.data?.error || e?.message || \"โหลดไม่สำเร็จ\");\r\n      setItems([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [qDebounced]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const reload = fetchList;\r\n\r\n  const upsert = useCallback(\r\n    async (payload) => {\r\n      await apiFetch(`/api/departments`, {\r\n        method: \"POST\",\r\n        body: { id: payload.id ?? null, ...payload },\r\n      });\r\n      await reload();\r\n    },\r\n    [reload]\r\n  );\r\n\r\n  const remove = useCallback(\r\n    async (id) => {\r\n      if (!confirm(\"ลบรายการนี้?\")) return;\r\n      await apiFetch(`/api/departments/${id}`, { method: \"DELETE\" });\r\n      await reload();\r\n    },\r\n    [reload]\r\n  );\r\n\r\n  return { items, loading, error, q, setQ, reload, upsert, remove };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;AAHA;;;;AAKO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,yKAAQ,EAAC;IAC3B,MAAM,aAAa,IAAA,gJAAgB,EAAC,GAAG;IAEvC,MAAM,YAAY,IAAA,4KAAW;iDAAC;YAC5B,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,IAAA,yHAAQ,EACxB,AAAC,sBAEC,OAFoB,mBACpB,aACA;gBAEJ,SAAS,CAAA,gBAAA,0BAAA,IAAK,IAAI,KAAI,EAAE;gBACxB,SAAS;YACX,EAAE,OAAO,GAAG;oBACD;gBAAT,SAAS,CAAA,cAAA,yBAAA,UAAA,EAAG,IAAI,cAAP,8BAAA,QAAS,KAAK,MAAI,cAAA,wBAAA,EAAG,OAAO,KAAI;gBACzC,SAAS,EAAE;YACb,SAAU;gBACR,WAAW;YACb;QACF;gDAAG;QAAC;KAAW;IAEf,IAAA,0KAAS;oCAAC;YACR;QACF;mCAAG;QAAC;KAAU;IAEd,MAAM,SAAS;IAEf,MAAM,SAAS,IAAA,4KAAW;8CACxB,OAAO;gBAGS;YAFd,MAAM,IAAA,yHAAQ,EAAE,oBAAmB;gBACjC,QAAQ;gBACR,MAAM;oBAAE,IAAI,CAAA,cAAA,QAAQ,EAAE,cAAV,yBAAA,cAAc;oBAAM,GAAG,OAAO;gBAAC;YAC7C;YACA,MAAM;QACR;6CACA;QAAC;KAAO;IAGV,MAAM,SAAS,IAAA,4KAAW;8CACxB,OAAO;YACL,IAAI,CAAC,QAAQ,iBAAiB;YAC9B,MAAM,IAAA,yHAAQ,EAAC,AAAC,oBAAsB,OAAH,KAAM;gBAAE,QAAQ;YAAS;YAC5D,MAAM;QACR;6CACA;QAAC;KAAO;IAGV,OAAO;QAAE;QAAO;QAAS;QAAO;QAAG;QAAM;QAAQ;QAAQ;IAAO;AAClE;GApDgB;;QAKK,gJAAgB","debugId":null}}]
}